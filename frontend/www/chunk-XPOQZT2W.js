import{Ea as c,b as u,g as i,p as r,r as g,t as h}from"./chunk-TEVF6OOM.js";import{a as o}from"./chunk-JHI3MBHO.js";var f=(()=>{let n=class n{constructor(t){this.http=t,this.apiUrl="http://localhost:3000/api/settings",this.settingsSubject=new u(null),this.settings$=this.settingsSubject.asObservable(),this.loadSettings()}loadSettings(){this.getSettings().subscribe({next:t=>{this.settingsSubject.next(t)},error:t=>{console.error("Error loading settings:",t)}})}getSettings(t){let e={};return t&&(e.userId=t),this.http.get(`${this.apiUrl}`,{params:e}).pipe(i(s=>s.data),r(s=>this.settingsSubject.next(s)))}updateSettings(t,e){return this.http.put(`${this.apiUrl}/${t}`,e).pipe(i(s=>s.data),r(s=>this.settingsSubject.next(s)))}updateExchangeRate(t,e,s){return this.http.put(`${this.apiUrl}/exchange-rate`,{settingsId:t,rate:e,useManual:s}).pipe(i(a=>a.data),r(a=>this.settingsSubject.next(a)))}updateTranslationSettings(t,e){return this.http.put(`${this.apiUrl}/translation`,o({settingsId:t},e)).pipe(i(s=>s.data),r(s=>this.settingsSubject.next(s)))}updateNotificationSettings(t,e){return this.http.put(`${this.apiUrl}/notifications`,o({settingsId:t},e)).pipe(i(s=>s.data),r(s=>this.settingsSubject.next(s)))}createBackup(t){let e={};return t&&(e.userId=t),this.http.post(`${this.apiUrl}/backup/create`,{},{params:e}).pipe(i(s=>s.data))}exportBackup(t){let e={};return t&&(e.userId=t),this.http.post(`${this.apiUrl}/backup/export`,{},{params:e,responseType:"blob"})}restoreBackup(t,e){let s=new FormData;s.append("backupFile",t);let a={};return e&&(a.userId=e),this.http.post(`${this.apiUrl}/backup/restore`,s,{params:a})}getBackupHistory(){return this.http.get(`${this.apiUrl}/backup/history`).pipe(i(t=>t.data))}getCurrentSettings(){return this.settingsSubject.value}getExchangeRate(){let t=this.getCurrentSettings();return t&&t.exchangeRateSettings.useManualRate&&t.exchangeRateSettings.manualRate?t.exchangeRateSettings.manualRate:null}isAutoTranslateEnabled(){return this.getCurrentSettings()?.translationSettings.autoTranslateEnabled??!0}getTargetLanguage(){return this.getCurrentSettings()?.translationSettings.targetLanguage??"ko"}areNotificationsEnabled(t){return this.getCurrentSettings()?.notificationSettings[t]??!0}};n.\u0275fac=function(e){return new(e||n)(h(c))},n.\u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"});let p=n;return p})();export{f as a};
