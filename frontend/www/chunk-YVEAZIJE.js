import{b as u,r as d}from"./chunk-TEVF6OOM.js";import{a as l,b as h}from"./chunk-JHI3MBHO.js";var R=(()=>{let a=class a{constructor(){this.currentLanguageSubject=new u("ko"),this.currentLanguage$=this.currentLanguageSubject.asObservable(),this.translations={},this.supportedLanguages=[{code:"ko",name:"\uD55C\uAD6D\uC5B4",flag:"\u{1F1F0}\u{1F1F7}"},{code:"ja",name:"\u65E5\u672C\u8A9E",flag:"\u{1F1EF}\u{1F1F5}"},{code:"en",name:"English",flag:"\u{1F1FA}\u{1F1F8}"},{code:"zh",name:"\u4E2D\u6587",flag:"\u{1F1E8}\u{1F1F3}"}],this.loadTranslations(),this.initializeLanguage()}initializeLanguage(){let e=localStorage.getItem("app-language");if(e&&this.isLanguageSupported(e)){this.setLanguage(e);return}let t=navigator.language.split("-")[0];if(this.isLanguageSupported(t)){this.setLanguage(t);return}this.setLanguage("ko")}loadTranslations(){this.translations.ko={common:{save:"\uC800\uC7A5",cancel:"\uCDE8\uC18C",delete:"\uC0AD\uC81C",edit:"\uD3B8\uC9D1",back:"\uB4A4\uB85C",loading:"\uB85C\uB529 \uC911...",error:"\uC624\uB958",success:"\uC131\uACF5",warning:"\uACBD\uACE0",confirm:"\uD655\uC778",yes:"\uC608",no:"\uC544\uB2C8\uC624",search:"\uAC80\uC0C9",filter:"\uD544\uD130",settings:"\uC124\uC815",language:"\uC5B8\uC5B4",offline:"\uC624\uD504\uB77C\uC778",online:"\uC628\uB77C\uC778",retry:"\uB2E4\uC2DC \uC2DC\uB3C4",refresh:"\uC0C8\uB85C\uACE0\uCE68"},navigation:{home:"\uD648",receipts:"\uC601\uC218\uC99D",budget:"\uAC00\uACC4\uBD80",gallery:"\uAC24\uB7EC\uB9AC",settings:"\uC124\uC815"},receipt:{title:"\uC601\uC218\uC99D",upload:"\uC601\uC218\uC99D \uC5C5\uB85C\uB4DC",camera:"\uCE74\uBA54\uB77C\uB85C \uCD2C\uC601",gallery:"\uAC24\uB7EC\uB9AC\uC5D0\uC11C \uC120\uD0DD",processing:"\uCC98\uB9AC \uC911...",storeName:"\uB9E4\uC7A5\uBA85",date:"\uB0A0\uC9DC",total:"\uCD1D\uC561",items:"\uAD6C\uB9E4 \uD488\uBAA9",noReceipts:"\uC601\uC218\uC99D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"},budget:{title:"\uAC00\uACC4\uBD80",summary:"\uC9C0\uCD9C \uC694\uC57D",daily:"\uC77C\uBCC4 \uC9C0\uCD9C",category:"\uCE74\uD14C\uACE0\uB9AC\uBCC4",totalSpent:"\uCD1D \uC9C0\uCD9C",averageDaily:"\uC77C\uD3C9\uADE0 \uC9C0\uCD9C"},settings:{title:"\uC124\uC815",language:"\uC5B8\uC5B4 \uC124\uC815",exchangeRate:"\uD658\uC728 \uC124\uC815",translation:"\uBC88\uC5ED \uC124\uC815",notifications:"\uC54C\uB9BC \uC124\uC815",backup:"\uBC31\uC5C5 \uC124\uC815",accessibility:"\uC811\uADFC\uC131 \uC124\uC815"},accessibility:{title:"\uC811\uADFC\uC131 \uC124\uC815",fontSize:"\uAE00\uC790 \uD06C\uAE30",highContrast:"\uACE0\uB300\uBE44 \uBAA8\uB4DC",screenReader:"\uC2A4\uD06C\uB9B0 \uB9AC\uB354 \uC9C0\uC6D0",voiceOver:"\uC74C\uC131 \uC548\uB0B4",reducedMotion:"\uC560\uB2C8\uBA54\uC774\uC158 \uC904\uC774\uAE30",largeButtons:"\uD070 \uBC84\uD2BC \uC0AC\uC6A9",textSettings:"\uD14D\uC2A4\uD2B8 \uC124\uC815",visualSettings:"\uC2DC\uAC01 \uC124\uC815",interactionSettings:"\uC0C1\uD638\uC791\uC6A9 \uC124\uC815",screenReaderSettings:"\uC2A4\uD06C\uB9B0 \uB9AC\uB354 \uC124\uC815",focusIndicators:"\uD3EC\uCEE4\uC2A4 \uD45C\uC2DC",announcements:"\uC74C\uC131 \uC548\uB0B4",information:"\uC811\uADFC\uC131 \uC815\uBCF4",skipToContent:"\uBCF8\uBB38\uC73C\uB85C \uAC74\uB108\uB6F0\uAE30",highContrastDescription:"\uD654\uBA74\uC758 \uB300\uBE44\uB97C \uB192\uC5EC \uAC00\uB3C5\uC131\uC744 \uD5A5\uC0C1\uC2DC\uD0B5\uB2C8\uB2E4",reducedMotionDescription:"\uC560\uB2C8\uBA54\uC774\uC158\uACFC \uC804\uD658 \uD6A8\uACFC\uB97C \uC904\uC785\uB2C8\uB2E4",focusIndicatorsDescription:"\uD0A4\uBCF4\uB4DC \uD0D0\uC0C9 \uC2DC \uD3EC\uCEE4\uC2A4 \uD45C\uC2DC\uB97C \uAC15\uD654\uD569\uB2C8\uB2E4",largeButtonsDescription:"\uBC84\uD2BC\uACFC \uD130\uCE58 \uC601\uC5ED\uC744 \uD06C\uAC8C \uB9CC\uB4ED\uB2C8\uB2E4",screenReaderDescription:"\uC2A4\uD06C\uB9B0 \uB9AC\uB354 \uD638\uD658\uC131\uC744 \uD5A5\uC0C1\uC2DC\uD0B5\uB2C8\uB2E4",voiceOverDescription:"iOS VoiceOver \uC9C0\uC6D0\uC744 \uD65C\uC131\uD654\uD569\uB2C8\uB2E4",announcementsDescription:"\uC0C1\uD0DC \uBCC0\uACBD \uC2DC \uC74C\uC131 \uC548\uB0B4\uB97C \uC81C\uACF5\uD569\uB2C8\uB2E4",informationText:"\uC774 \uC571\uC740 \uC6F9 \uC811\uADFC\uC131 \uC9C0\uCE68(WCAG 2.1)\uC744 \uC900\uC218\uD558\uC5EC \uAC1C\uBC1C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",learnMore:"\uC790\uC138\uD788 \uC54C\uC544\uBCF4\uAE30",resetToDefaults:"\uAE30\uBCF8\uAC12\uC73C\uB85C \uC7AC\uC124\uC815",fontSizeUpdated:"\uAE00\uC790 \uD06C\uAE30\uAC00 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4",highContrastEnabled:"\uACE0\uB300\uBE44 \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",highContrastDisabled:"\uACE0\uB300\uBE44 \uBAA8\uB4DC\uAC00 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",reducedMotionEnabled:"\uC560\uB2C8\uBA54\uC774\uC158 \uC904\uC774\uAE30\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",reducedMotionDisabled:"\uC560\uB2C8\uBA54\uC774\uC158 \uC904\uC774\uAE30\uAC00 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",screenReaderEnabled:"\uC2A4\uD06C\uB9B0 \uB9AC\uB354 \uC9C0\uC6D0\uC774 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",screenReaderDisabled:"\uC2A4\uD06C\uB9B0 \uB9AC\uB354 \uC9C0\uC6D0\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",voiceOverEnabled:"\uC74C\uC131 \uC548\uB0B4\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",voiceOverDisabled:"\uC74C\uC131 \uC548\uB0B4\uAC00 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",largeButtonsEnabled:"\uD070 \uBC84\uD2BC\uC774 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",largeButtonsDisabled:"\uD070 \uBC84\uD2BC\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",focusIndicatorsEnabled:"\uD3EC\uCEE4\uC2A4 \uD45C\uC2DC\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",focusIndicatorsDisabled:"\uD3EC\uCEE4\uC2A4 \uD45C\uC2DC\uAC00 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",announcementsEnabled:"\uC74C\uC131 \uC548\uB0B4\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",announcementsDisabled:"\uC74C\uC131 \uC548\uB0B4\uAC00 \uBE44\uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4"},offline:{title:"\uC624\uD504\uB77C\uC778 \uBAA8\uB4DC",message:"\uC778\uD130\uB137 \uC5F0\uACB0\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uC624\uD504\uB77C\uC778 \uBAA8\uB4DC\uB85C \uC804\uD658\uB429\uB2C8\uB2E4.",dataSync:"\uB370\uC774\uD130 \uB3D9\uAE30\uD654",pendingUploads:"\uB300\uAE30 \uC911\uC778 \uC5C5\uB85C\uB4DC",syncWhenOnline:"\uC628\uB77C\uC778 \uC0C1\uD0DC\uAC00 \uB418\uBA74 \uC790\uB3D9\uC73C\uB85C \uB3D9\uAE30\uD654\uB429\uB2C8\uB2E4.",statusChange:"\uC0C1\uD0DC \uBCC0\uACBD",syncing:"\uB3D9\uAE30\uD654 \uC911...",syncError:"\uB3D9\uAE30\uD654 \uC624\uB958",pendingSync:"{{count}}\uAC1C \uD56D\uBAA9 \uB3D9\uAE30\uD654 \uB300\uAE30 \uC911",allSynced:"\uBAA8\uB4E0 \uB370\uC774\uD130\uAC00 \uB3D9\uAE30\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4",neverSynced:"\uB3D9\uAE30\uD654\uB41C \uC801 \uC5C6\uC74C",justNow:"\uBC29\uAE08 \uC804",minutesAgo:"{{minutes}}\uBD84 \uC804",hoursAgo:"{{hours}}\uC2DC\uAC04 \uC804",daysAgo:"{{days}}\uC77C \uC804",lastSync:"\uB9C8\uC9C0\uB9C9 \uB3D9\uAE30\uD654",pendingActions:"{{count}}\uAC1C \uB300\uAE30 \uC911\uC778 \uC791\uC5C5",retrySync:"\uB3D9\uAE30\uD654 \uC7AC\uC2DC\uB3C4",syncProgress:"\uB3D9\uAE30\uD654 \uC9C4\uD589\uB960",screenReaderOffline:"\uC624\uD504\uB77C\uC778 \uC0C1\uD0DC\uC785\uB2C8\uB2E4",screenReaderSyncing:"\uB370\uC774\uD130\uB97C \uB3D9\uAE30\uD654\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4",screenReaderError:"\uB3D9\uAE30\uD654 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4"}},this.translations.ja={common:{save:"\u4FDD\u5B58",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",delete:"\u524A\u9664",edit:"\u7DE8\u96C6",back:"\u623B\u308B",loading:"\u8AAD\u307F\u8FBC\u307F\u4E2D...",error:"\u30A8\u30E9\u30FC",success:"\u6210\u529F",warning:"\u8B66\u544A",confirm:"\u78BA\u8A8D",yes:"\u306F\u3044",no:"\u3044\u3044\u3048",search:"\u691C\u7D22",filter:"\u30D5\u30A3\u30EB\u30BF\u30FC",settings:"\u8A2D\u5B9A",language:"\u8A00\u8A9E",offline:"\u30AA\u30D5\u30E9\u30A4\u30F3",online:"\u30AA\u30F3\u30E9\u30A4\u30F3",retry:"\u518D\u8A66\u884C",refresh:"\u66F4\u65B0"},navigation:{home:"\u30DB\u30FC\u30E0",receipts:"\u30EC\u30B7\u30FC\u30C8",budget:"\u5BB6\u8A08\u7C3F",gallery:"\u30AE\u30E3\u30E9\u30EA\u30FC",settings:"\u8A2D\u5B9A"},receipt:{title:"\u30EC\u30B7\u30FC\u30C8",upload:"\u30EC\u30B7\u30FC\u30C8\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",camera:"\u30AB\u30E1\u30E9\u3067\u64AE\u5F71",gallery:"\u30AE\u30E3\u30E9\u30EA\u30FC\u304B\u3089\u9078\u629E",processing:"\u51E6\u7406\u4E2D...",storeName:"\u5E97\u8217\u540D",date:"\u65E5\u4ED8",total:"\u5408\u8A08",items:"\u8CFC\u5165\u5546\u54C1",noReceipts:"\u30EC\u30B7\u30FC\u30C8\u304C\u3042\u308A\u307E\u305B\u3093"},budget:{title:"\u5BB6\u8A08\u7C3F",summary:"\u652F\u51FA\u8981\u7D04",daily:"\u65E5\u5225\u652F\u51FA",category:"\u30AB\u30C6\u30B4\u30EA\u5225",totalSpent:"\u7DCF\u652F\u51FA",averageDaily:"\u65E5\u5E73\u5747\u652F\u51FA"},settings:{title:"\u8A2D\u5B9A",language:"\u8A00\u8A9E\u8A2D\u5B9A",exchangeRate:"\u70BA\u66FF\u30EC\u30FC\u30C8\u8A2D\u5B9A",translation:"\u7FFB\u8A33\u8A2D\u5B9A",notifications:"\u901A\u77E5\u8A2D\u5B9A",backup:"\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u8A2D\u5B9A",accessibility:"\u30A2\u30AF\u30BB\u30B7\u30D3\u30EA\u30C6\u30A3\u8A2D\u5B9A"},accessibility:{title:"\u30A2\u30AF\u30BB\u30B7\u30D3\u30EA\u30C6\u30A3\u8A2D\u5B9A",fontSize:"\u30D5\u30A9\u30F3\u30C8\u30B5\u30A4\u30BA",highContrast:"\u30CF\u30A4\u30B3\u30F3\u30C8\u30E9\u30B9\u30C8\u30E2\u30FC\u30C9",screenReader:"\u30B9\u30AF\u30EA\u30FC\u30F3\u30EA\u30FC\u30C0\u30FC\u5BFE\u5FDC",voiceOver:"\u97F3\u58F0\u30AC\u30A4\u30C9",reducedMotion:"\u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u524A\u6E1B",largeButtons:"\u5927\u304D\u306A\u30DC\u30BF\u30F3\u3092\u4F7F\u7528"},offline:{title:"\u30AA\u30D5\u30E9\u30A4\u30F3\u30E2\u30FC\u30C9",message:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u63A5\u7D9A\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u30AA\u30D5\u30E9\u30A4\u30F3\u30E2\u30FC\u30C9\u306B\u5207\u308A\u66FF\u3048\u307E\u3059\u3002",dataSync:"\u30C7\u30FC\u30BF\u540C\u671F",pendingUploads:"\u4FDD\u7559\u4E2D\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",syncWhenOnline:"\u30AA\u30F3\u30E9\u30A4\u30F3\u72B6\u614B\u306B\u306A\u308B\u3068\u81EA\u52D5\u7684\u306B\u540C\u671F\u3055\u308C\u307E\u3059\u3002"}},this.translations.en={common:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",back:"Back",loading:"Loading...",error:"Error",success:"Success",warning:"Warning",confirm:"Confirm",yes:"Yes",no:"No",search:"Search",filter:"Filter",settings:"Settings",language:"Language",offline:"Offline",online:"Online",retry:"Retry",refresh:"Refresh"},navigation:{home:"Home",receipts:"Receipts",budget:"Budget",gallery:"Gallery",settings:"Settings"},receipt:{title:"Receipt",upload:"Upload Receipt",camera:"Take Photo",gallery:"Select from Gallery",processing:"Processing...",storeName:"Store Name",date:"Date",total:"Total",items:"Items",noReceipts:"No receipts found"},budget:{title:"Budget",summary:"Expense Summary",daily:"Daily Expenses",category:"By Category",totalSpent:"Total Spent",averageDaily:"Daily Average"},settings:{title:"Settings",language:"Language Settings",exchangeRate:"Exchange Rate Settings",translation:"Translation Settings",notifications:"Notification Settings",backup:"Backup Settings",accessibility:"Accessibility Settings"},accessibility:{title:"Accessibility Settings",fontSize:"Font Size",highContrast:"High Contrast Mode",screenReader:"Screen Reader Support",voiceOver:"Voice Over",reducedMotion:"Reduce Motion",largeButtons:"Use Large Buttons"},offline:{title:"Offline Mode",message:"No internet connection. Switching to offline mode.",dataSync:"Data Sync",pendingUploads:"Pending Uploads",syncWhenOnline:"Will sync automatically when online."}},this.translations.zh={common:{save:"\u4FDD\u5B58",cancel:"\u53D6\u6D88",delete:"\u5220\u9664",edit:"\u7F16\u8F91",back:"\u8FD4\u56DE",loading:"\u52A0\u8F7D\u4E2D...",error:"\u9519\u8BEF",success:"\u6210\u529F",warning:"\u8B66\u544A",confirm:"\u786E\u8BA4",yes:"\u662F",no:"\u5426",search:"\u641C\u7D22",filter:"\u7B5B\u9009",settings:"\u8BBE\u7F6E",language:"\u8BED\u8A00",offline:"\u79BB\u7EBF",online:"\u5728\u7EBF",retry:"\u91CD\u8BD5",refresh:"\u5237\u65B0"},navigation:{home:"\u9996\u9875",receipts:"\u6536\u636E",budget:"\u9884\u7B97",gallery:"\u56FE\u5E93",settings:"\u8BBE\u7F6E"},receipt:{title:"\u6536\u636E",upload:"\u4E0A\u4F20\u6536\u636E",camera:"\u62CD\u7167",gallery:"\u4ECE\u56FE\u5E93\u9009\u62E9",processing:"\u5904\u7406\u4E2D...",storeName:"\u5546\u5E97\u540D\u79F0",date:"\u65E5\u671F",total:"\u603B\u8BA1",items:"\u5546\u54C1",noReceipts:"\u6CA1\u6709\u627E\u5230\u6536\u636E"},budget:{title:"\u9884\u7B97",summary:"\u652F\u51FA\u6458\u8981",daily:"\u6BCF\u65E5\u652F\u51FA",category:"\u6309\u7C7B\u522B",totalSpent:"\u603B\u652F\u51FA",averageDaily:"\u65E5\u5747\u652F\u51FA"},settings:{title:"\u8BBE\u7F6E",language:"\u8BED\u8A00\u8BBE\u7F6E",exchangeRate:"\u6C47\u7387\u8BBE\u7F6E",translation:"\u7FFB\u8BD1\u8BBE\u7F6E",notifications:"\u901A\u77E5\u8BBE\u7F6E",backup:"\u5907\u4EFD\u8BBE\u7F6E",accessibility:"\u65E0\u969C\u788D\u8BBE\u7F6E"},accessibility:{title:"\u65E0\u969C\u788D\u8BBE\u7F6E",fontSize:"\u5B57\u4F53\u5927\u5C0F",highContrast:"\u9AD8\u5BF9\u6BD4\u5EA6\u6A21\u5F0F",screenReader:"\u5C4F\u5E55\u9605\u8BFB\u5668\u652F\u6301",voiceOver:"\u8BED\u97F3\u63D0\u793A",reducedMotion:"\u51CF\u5C11\u52A8\u753B",largeButtons:"\u4F7F\u7528\u5927\u6309\u94AE"},offline:{title:"\u79BB\u7EBF\u6A21\u5F0F",message:"\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u3002\u5207\u6362\u5230\u79BB\u7EBF\u6A21\u5F0F\u3002",dataSync:"\u6570\u636E\u540C\u6B65",pendingUploads:"\u5F85\u4E0A\u4F20",syncWhenOnline:"\u8054\u7F51\u540E\u5C06\u81EA\u52A8\u540C\u6B65\u3002"}}}setLanguage(e){if(this.isLanguageSupported(e)){this.currentLanguageSubject.next(e),localStorage.setItem("app-language",e),document.documentElement.lang=e;let t=this.supportedLanguages.find(n=>n.code===e);document.documentElement.dir=t?.rtl?"rtl":"ltr"}}getCurrentLanguage(){return this.currentLanguageSubject.value}isLanguageSupported(e){return this.supportedLanguages.some(t=>t.code===e)}translate(e,t){let n=this.getCurrentLanguage(),s=this.getNestedTranslation(this.translations[n],e);if(!s){let i=this.getNestedTranslation(this.translations.ko,e);return i?this.interpolateParams(i,t):(console.warn(`Translation not found for key: ${e}`),e)}return this.interpolateParams(s,t)}getNestedTranslation(e,t){let n=t.split("."),s=e;for(let i of n)if(s&&typeof s=="object"&&i in s)s=s[i];else return null;return typeof s=="string"?s:null}interpolateParams(e,t){if(!t)return e;let n=e;return Object.keys(t).forEach(s=>{n=n.replace(new RegExp(`{{${s}}}`,"g"),t[s])}),n}getLanguageOptions(){return this.supportedLanguages}getLanguageName(e){let t=this.supportedLanguages.find(n=>n.code===e);return t?`${t.flag} ${t.name}`:e}announceToScreenReader(e){let t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}setPageTitle(e){let t=this.translate(e);document.title=`${t} - Receipt Manager`}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();var D=(()=>{let a=class a{constructor(){this.settingsSubject=new u({fontSize:"medium",highContrast:!1,reducedMotion:!1,screenReaderSupport:!0,voiceOverEnabled:!1,largeButtons:!1,focusIndicators:!0,announcements:!0}),this.settings$=this.settingsSubject.asObservable(),this.loadSettings(),this.initializeAccessibility()}loadSettings(){let e=localStorage.getItem("accessibility-settings");if(e)try{let t=JSON.parse(e);this.settingsSubject.next(l(l({},this.settingsSubject.value),t))}catch(t){console.error("Error loading accessibility settings:",t)}this.detectSystemPreferences()}detectSystemPreferences(){let e=this.settingsSubject.value,t=!1;window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(e.reducedMotion=!0,t=!0),window.matchMedia&&window.matchMedia("(prefers-contrast: high)").matches&&(e.highContrast=!0,t=!0),window.matchMedia&&(window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",n=>{this.updateSetting("reducedMotion",n.matches)}),window.matchMedia("(prefers-contrast: high)").addEventListener("change",n=>{this.updateSetting("highContrast",n.matches)})),t&&(this.settingsSubject.next(e),this.saveSettings())}initializeAccessibility(){this.settings$.subscribe(e=>{this.applyFontSize(e.fontSize),this.applyHighContrast(e.highContrast),this.applyReducedMotion(e.reducedMotion),this.applyLargeButtons(e.largeButtons),this.applyFocusIndicators(e.focusIndicators)})}updateSetting(e,t){let n=this.settingsSubject.value,s=h(l({},n),{[e]:t});this.settingsSubject.next(s),this.saveSettings()}getSettings(){return this.settingsSubject.value}saveSettings(){localStorage.setItem("accessibility-settings",JSON.stringify(this.settingsSubject.value))}applyFontSize(e){let t=document.documentElement;t.classList.remove("font-small","font-medium","font-large","font-extra-large"),t.classList.add(`font-${e}`);let n={small:"0.875",medium:"1",large:"1.125","extra-large":"1.25"};t.style.setProperty("--font-scale",n[e])}applyHighContrast(e){let t=document.documentElement;e?t.classList.add("high-contrast"):t.classList.remove("high-contrast")}applyReducedMotion(e){let t=document.documentElement;e?t.classList.add("reduced-motion"):t.classList.remove("reduced-motion")}applyLargeButtons(e){let t=document.documentElement;e?t.classList.add("large-buttons"):t.classList.remove("large-buttons")}applyFocusIndicators(e){let t=document.documentElement;e?t.classList.add("focus-indicators"):t.classList.remove("focus-indicators")}announceToScreenReader(e,t="polite"){if(!this.settingsSubject.value.announcements)return;let n=document.createElement("div");n.setAttribute("aria-live",t),n.setAttribute("aria-atomic","true"),n.className="sr-only",n.textContent=e,document.body.appendChild(n),setTimeout(()=>{document.body.contains(n)&&document.body.removeChild(n)},1e3)}setAriaLabel(e,t){e.setAttribute("aria-label",t)}setAriaDescribedBy(e,t){e.setAttribute("aria-describedby",t)}setAriaExpanded(e,t){e.setAttribute("aria-expanded",t.toString())}setAriaPressed(e,t){e.setAttribute("aria-pressed",t.toString())}setAriaSelected(e,t){e.setAttribute("aria-selected",t.toString())}setAriaHidden(e,t){e.setAttribute("aria-hidden",t.toString())}setRole(e,t){e.setAttribute("role",t)}setTabIndex(e,t){e.setAttribute("tabindex",t.toString())}focusElement(e){e.focus();let t=e.getAttribute("aria-label")||e.getAttribute("title")||e.textContent||"Element focused";this.announceToScreenReader(`Focused: ${t}`)}trapFocus(e){let t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=t[0],s=t[t.length-1],i=o=>{o.key==="Tab"&&(o.shiftKey?document.activeElement===n&&(s.focus(),o.preventDefault()):document.activeElement===s&&(n.focus(),o.preventDefault()))};return e.addEventListener("keydown",i),n&&n.focus(),()=>{e.removeEventListener("keydown",i)}}makeTouchAccessible(e,t){let n=window.getComputedStyle(e),s=parseInt(n.width),i=parseInt(n.height);(s<44||i<44)&&(e.style.minWidth="44px",e.style.minHeight="44px"),e.addEventListener("touchstart",o=>{o.preventDefault(),e.classList.add("touch-active")}),e.addEventListener("touchend",o=>{o.preventDefault(),e.classList.remove("touch-active"),t()}),e.addEventListener("touchcancel",()=>{e.classList.remove("touch-active")})}checkColorContrast(e,t){let n=m=>{let g=this.hexToRgb(m);if(!g)return 0;let{r:f,g:b,b:y}=g,[S,v,L]=[f,b,y].map(c=>(c=c/255,c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4)));return .2126*S+.7152*v+.0722*L},s=n(e),i=n(t),o=Math.max(s,i),p=Math.min(s,i);return(o+.05)/(p+.05)}hexToRgb(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}handleArrowNavigation(e,t,n){let s=t;switch(n){case"up":case"left":s=t>0?t-1:e.length-1;break;case"down":case"right":s=t<e.length-1?t+1:0;break}return e[s].focus(),s}enableVoiceOverSupport(){this.settingsSubject.value.voiceOverEnabled&&(document.body.setAttribute("data-voiceover","true"),document.addEventListener("touchstart",this.handleVoiceOverGestures.bind(this)))}handleVoiceOverGestures(e){if(e.touches.length===1){let t=e.touches[0]}}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();export{R as a,D as b};
