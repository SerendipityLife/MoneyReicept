import{a as ae}from"./chunk-HI7SONCK.js";import{a as ne}from"./chunk-5JAPTZXA.js";import{a as ie}from"./chunk-XPOQZT2W.js";import{Ba as O,Cb as U,E as o,F as _,Gb as q,H as x,Kb as J,L as h,Lb as K,P as d,Pa as A,Q as e,Qa as L,R as t,S as E,Sb as Q,Ua as k,X as C,Xb as V,Y as b,Yb as X,_b as Y,dc as Z,fa as n,ga as I,gc as $,ha as m,ia as B,ka as f,la as v,lc as ee,ma as T,nc as te,pa as S,pb as F,qa as M,qb as W,ra as D,rb as z,sb as j,tb as H,va as y,vb as N,wa as w,wb as R,yb as G,za as P}from"./chunk-TEVF6OOM.js";import"./chunk-5HJQGQPL.js";import"./chunk-7KGURMOZ.js";import"./chunk-7NBBWGH4.js";import"./chunk-MYTP3L75.js";import"./chunk-HDBTADGC.js";import"./chunk-YSN7XVTD.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-F5TKO3NK.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as p}from"./chunk-JHI3MBHO.js";function oe(s,c){if(s&1&&(e(0,"ion-select-option",19),n(1),t()),s&2){let r=c.$implicit;d("value",r.code),o(),B(" ",r.flag," ",r.name," ")}}function re(s,c){if(s&1&&(e(0,"ion-select-option",19),n(1),t()),s&2){let r=c.$implicit;d("value",r.code),o(),B(" ",r.flag," ",r.name," ")}}function se(s,c){if(s&1&&(e(0,"ion-chip",26),n(1),t()),s&2){let r=c.$implicit;o(),B(" ",r.label,": ",r.count," ")}}function le(s,c){if(s&1&&(e(0,"div",23)(1,"h4"),n(2,"\uC5B8\uC5B4 \uC30D\uBCC4 \uBC88\uC5ED \uC218"),t(),e(3,"div",24),h(4,se,2,2,"ion-chip",25),t()()),s&2){let r=b(2);o(4),d("ngForOf",r.getLanguagePairs())}}function ue(s,c){if(s&1&&(e(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),n(3,"\uBC88\uC5ED \uD1B5\uACC4"),t()(),e(4,"ion-card-content")(5,"ion-list")(6,"ion-item")(7,"ion-label")(8,"h3"),n(9,"\uCD1D \uBC88\uC5ED \uC218"),t(),e(10,"p"),n(11),S(12,"number"),t()(),e(13,"ion-chip",20),n(14),S(15,"number"),t()(),e(16,"ion-item")(17,"ion-label")(18,"h3"),n(19,"\uCE90\uC2DC \uC801\uC911\uB960"),t(),e(20,"p"),n(21),S(22,"number"),t()(),e(23,"ion-chip",21),n(24),S(25,"number"),t()(),e(26,"ion-item")(27,"ion-label")(28,"h3"),n(29,"\uD3C9\uADE0 \uC2E0\uB8B0\uB3C4"),t(),e(30,"p"),n(31,"\uBC88\uC5ED \uD488\uC9C8 \uC810\uC218"),t()(),e(32,"ion-chip",21),n(33),S(34,"number"),t()()(),h(35,le,5,1,"div",22),t()()),s&2){let r=b();o(11),I(M(12,8,r.stats.totalTranslations)),o(3),m(" ",M(15,10,r.stats.totalTranslations)," "),o(7),m("",D(22,12,r.stats.cacheHitRate*100,"1.1-1"),"%"),o(2),d("color",r.stats.cacheHitRate>.7?"success":r.stats.cacheHitRate>.4?"warning":"danger"),o(),m(" ",D(25,15,r.stats.cacheHitRate*100,"1.0-0"),"% "),o(8),d("color",r.stats.averageConfidence>.8?"success":r.stats.averageConfidence>.6?"warning":"danger"),o(),m(" ",D(34,18,r.stats.averageConfidence*100,"1.0-0"),"% "),o(2),d("ngIf",r.stats.languagePairs)}}var fe=(()=>{let c=class c{constructor(a,l,i,g){this.modalController=a,this.translationService=l,this.settingsService=i,this.toastController=g,this.settings={sourceLanguage:"ja",targetLanguage:"ko",autoTranslateEnabled:!0,translationProvider:"google"},this.stats=null,this.cacheSize=0,this.isSaving=!1,this.languageOptions=ae}ngOnInit(){this.loadCurrentSettings(),this.loadStats(),this.loadCacheSize()}loadCurrentSettings(){let a=this.settingsService.getCurrentSettings();a?.translationSettings&&(this.settings={sourceLanguage:a.translationSettings.sourceLanguage,targetLanguage:a.translationSettings.targetLanguage,autoTranslateEnabled:a.translationSettings.autoTranslateEnabled,translationProvider:a.translationSettings.translationProvider})}loadStats(){this.translationService.getTranslationStats().subscribe({next:a=>{this.stats=a},error:a=>{console.error("Error loading translation stats:",a)}})}loadCacheSize(){this.cacheSize=this.translationService.getCacheSize()}onSettingsChange(){}getLanguagePairs(){return this.stats?.languagePairs?Object.entries(this.stats.languagePairs).map(([a,l])=>({label:a,count:l})):[]}clearCache(){return p(this,null,function*(){yield(yield this.toastController.create({message:"\uCE90\uC2DC\uB97C \uC0AD\uC81C\uD558\uB294 \uC911...",duration:1e3})).present(),this.translationService.clearCache().subscribe({next:()=>{this.loadCacheSize(),this.showSuccessToast("\uCE90\uC2DC\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")},error:l=>{console.error("Error clearing cache:",l),this.showErrorToast("\uCE90\uC2DC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})})}clearOldCache(){return p(this,null,function*(){yield(yield this.toastController.create({message:"\uC624\uB798\uB41C \uCE90\uC2DC\uB97C \uC0AD\uC81C\uD558\uB294 \uC911...",duration:1e3})).present(),this.translationService.clearCache(30).subscribe({next:()=>{this.loadCacheSize(),this.showSuccessToast("\uC624\uB798\uB41C \uCE90\uC2DC\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")},error:l=>{console.error("Error clearing old cache:",l),this.showErrorToast("\uCE90\uC2DC \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})})}saveAndClose(){return p(this,null,function*(){this.isSaving=!0;let a=this.settingsService.getCurrentSettings();a?this.settingsService.updateTranslationSettings(a.id,this.settings).subscribe({next:()=>{this.isSaving=!1,this.showSuccessToast("\uBC88\uC5ED \uC124\uC815\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.dismiss(this.settings)},error:l=>{console.error("Error saving settings:",l),this.isSaving=!1,this.showErrorToast("\uC124\uC815 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}):(this.isSaving=!1,this.showErrorToast("\uC124\uC815\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."))})}dismiss(a){this.modalController.dismiss(a)}showSuccessToast(a){return p(this,null,function*(){(yield this.toastController.create({message:a,duration:2e3,position:"bottom",color:"success"})).present()})}showErrorToast(a){return p(this,null,function*(){(yield this.toastController.create({message:a,duration:3e3,position:"bottom",color:"danger"})).present()})}};c.\u0275fac=function(l){return new(l||c)(_(Y),_(ne),_(ie),_(Z))},c.\u0275cmp=x({type:c,selectors:[["app-translation-settings-modal"]],decls:75,vars:11,consts:[["slot","end"],[3,"click"],["name","close"],["interface","popover",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["slot","end",3,"ngModelChange","ionChange","ngModel"],["interface","popover","slot","end",3,"ngModelChange","ionChange","ngModel"],["value","google"],["value","manual"],[4,"ngIf"],["color","medium","slot","end"],["button","",3,"click"],["name","trash-outline","slot","start","color","danger"],["color","danger"],["name","time-outline","slot","start","color","warning"],["color","warning"],[1,"action-buttons"],["expand","block",3,"click","disabled"],["name","checkmark","slot","start"],[3,"value"],["color","primary","slot","end"],["slot","end",3,"color"],["class","language-pairs",4,"ngIf"],[1,"language-pairs"],[1,"language-pair-list"],["color","medium","class","language-pair-chip",4,"ngFor","ngForOf"],["color","medium",1,"language-pair-chip"]],template:function(l,i){l&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n(3,"\uBC88\uC5ED \uC124\uC815"),t(),e(4,"ion-buttons",0)(5,"ion-button",1),C("click",function(){return i.dismiss()}),E(6,"ion-icon",2),t()()()(),e(7,"ion-content")(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),n(11,"\uC5B8\uC5B4 \uC124\uC815"),t()(),e(12,"ion-card-content")(13,"ion-list")(14,"ion-item")(15,"ion-label"),n(16,"\uC6D0\uBCF8 \uC5B8\uC5B4"),t(),e(17,"ion-select",3),T("ngModelChange",function(u){return v(i.settings.sourceLanguage,u)||(i.settings.sourceLanguage=u),u}),C("ionChange",function(){return i.onSettingsChange()}),h(18,oe,2,3,"ion-select-option",4),t()(),e(19,"ion-item")(20,"ion-label"),n(21,"\uBC88\uC5ED \uC5B8\uC5B4"),t(),e(22,"ion-select",3),T("ngModelChange",function(u){return v(i.settings.targetLanguage,u)||(i.settings.targetLanguage=u),u}),C("ionChange",function(){return i.onSettingsChange()}),h(23,re,2,3,"ion-select-option",4),t()(),e(24,"ion-item")(25,"ion-label")(26,"h3"),n(27,"\uC790\uB3D9 \uBC88\uC5ED"),t(),e(28,"p"),n(29,"\uC601\uC218\uC99D \uB85C\uB4DC \uC2DC \uC790\uB3D9\uC73C\uB85C \uBC88\uC5ED"),t()(),e(30,"ion-toggle",5),T("ngModelChange",function(u){return v(i.settings.autoTranslateEnabled,u)||(i.settings.autoTranslateEnabled=u),u}),C("ionChange",function(){return i.onSettingsChange()}),t()(),e(31,"ion-item")(32,"ion-label")(33,"h3"),n(34,"\uBC88\uC5ED \uC81C\uACF5\uC790"),t(),e(35,"p"),n(36,"\uBC88\uC5ED \uC11C\uBE44\uC2A4 \uC120\uD0DD"),t()(),e(37,"ion-select",6),T("ngModelChange",function(u){return v(i.settings.translationProvider,u)||(i.settings.translationProvider=u),u}),C("ionChange",function(){return i.onSettingsChange()}),e(38,"ion-select-option",7),n(39,"Google Translate"),t(),e(40,"ion-select-option",8),n(41,"\uC218\uB3D9 \uBC88\uC5ED"),t()()()()()(),h(42,ue,36,21,"ion-card",9),e(43,"ion-card")(44,"ion-card-header")(45,"ion-card-title"),n(46,"\uCE90\uC2DC \uAD00\uB9AC"),t()(),e(47,"ion-card-content")(48,"ion-list")(49,"ion-item")(50,"ion-label")(51,"h3"),n(52,"\uCE90\uC2DC \uD06C\uAE30"),t(),e(53,"p"),n(54),t()(),e(55,"ion-chip",10),n(56),t()(),e(57,"ion-item",11),C("click",function(){return i.clearCache()}),E(58,"ion-icon",12),e(59,"ion-label",13)(60,"h3"),n(61,"\uCE90\uC2DC \uC0AD\uC81C"),t(),e(62,"p"),n(63,"\uBAA8\uB4E0 \uBC88\uC5ED \uCE90\uC2DC\uB97C \uC0AD\uC81C\uD569\uB2C8\uB2E4"),t()()(),e(64,"ion-item",11),C("click",function(){return i.clearOldCache()}),E(65,"ion-icon",14),e(66,"ion-label",15)(67,"h3"),n(68,"\uC624\uB798\uB41C \uCE90\uC2DC \uC0AD\uC81C"),t(),e(69,"p"),n(70,"30\uC77C \uC774\uC0C1\uB41C \uCE90\uC2DC\uB97C \uC0AD\uC81C\uD569\uB2C8\uB2E4"),t()()()()()(),e(71,"div",16)(72,"ion-button",17),C("click",function(){return i.saveAndClose()}),E(73,"ion-icon",18),n(74),t()()()),l&2&&(o(17),f("ngModel",i.settings.sourceLanguage),o(),d("ngForOf",i.languageOptions),o(4),f("ngModel",i.settings.targetLanguage),o(),d("ngForOf",i.languageOptions),o(7),f("ngModel",i.settings.autoTranslateEnabled),o(7),f("ngModel",i.settings.translationProvider),o(5),d("ngIf",i.stats),o(12),m("",i.cacheSize," \uAC1C\uC758 \uBC88\uC5ED\uC774 \uCE90\uC2DC\uB428"),o(2),m(" ",i.cacheSize," "),o(16),d("disabled",i.isSaving),o(2),m(" ",i.isSaving?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5\uD558\uACE0 \uB2EB\uAE30"," "))},dependencies:[O,y,w,k,A,L,U,X,V,G,W,F,$,q,J,K,ee,Q,te,z,H,N,j,R,P],styles:[".language-pairs[_ngcontent-%COMP%]{margin-top:16px}.language-pairs[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9em;color:var(--ion-color-medium)}.language-pair-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.language-pair-chip[_ngcontent-%COMP%]{font-size:.8em;--padding-start: 8px;--padding-end: 8px}.action-buttons[_ngcontent-%COMP%]{padding:16px 16px 32px}ion-card[_ngcontent-%COMP%]{margin-bottom:16px}ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px}"]});let s=c;return s})();export{fe as TranslationSettingsModalComponent};
