import{a as ht,b as yt,c as be,e as Pt}from"./chunk-HNXDEXZH.js";import"./chunk-JHTPU5XN.js";import{$ as ft,C as st,E as dt,K as ut,M as pt,O as mt,R as gt,S as Ct,X as _t,a as xe,c as ot,f as rt,i as ve,l as we,s as at,w as ct,z as lt}from"./chunk-BXN76OUI.js";import{Ab as Ge,Ba as Z,Bb as We,Cb as ce,Db as le,E as l,Eb as $e,F as S,Fb as qe,Gb as se,H as Y,Kb as de,L as f,Lb as ue,Nb as He,Ob as Ne,P as u,Pa as ke,Pb as Ke,Q as a,Qa as Fe,Qb as Je,R as c,S as _,Sb as pe,Ta as Re,Tb as me,Ua as ee,W as I,Wb as Ye,X as x,Xb as ge,Y as g,Yb as Ce,_b as _e,ac as Qe,bc as fe,cc as Xe,dc as Ze,ec as et,fa as d,ga as D,gc as he,ha as O,hc as tt,ic as ye,ja as Ae,jc as nt,ka as F,la as R,lc as Pe,ma as z,mc as it,ob as te,pb as ne,qb as ie,rb as oe,sb as re,va as Q,w,wa as X,wb as ze,x as b,xb as Ve,yb as ae,zb as je}from"./chunk-TEVF6OOM.js";import"./chunk-5HJQGQPL.js";import"./chunk-7KGURMOZ.js";import"./chunk-7NBBWGH4.js";import"./chunk-MYTP3L75.js";import"./chunk-HDBTADGC.js";import"./chunk-YSN7XVTD.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-F5TKO3NK.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as p}from"./chunk-JHI3MBHO.js";function Dt(i,t){i&1&&_(0,"ion-spinner",13)}function Tt(i,t){i&1&&_(0,"ion-icon",14)}function Lt(i,t){if(i&1&&(a(0,"ion-badge",15),d(1),c()),i&2){let e=g();u("color",e.getConfidenceColor(e.analysisResult.confidenceScore)),l(),O(" \uC2E0\uB8B0\uB3C4: ",(e.analysisResult.confidenceScore*100).toFixed(0),"% ")}}function Ut(i,t){i&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"div",16),_(3,"ion-spinner",13),a(4,"p"),d(5,"\uC0C1\uD488\uC744 \uBD84\uC11D\uD558\uB294 \uC911..."),c()(),_(6,"ion-progress-bar",17),c()())}function At(i,t){if(i&1){let e=I();a(0,"ion-card")(1,"ion-card-content")(2,"div",18),_(3,"ion-icon",19),a(4,"p"),d(5),c(),a(6,"ion-button",20),x("click",function(){w(e);let r=g();return b(r.retryAnalysis())}),_(7,"ion-icon",21),d(8," \uB2E4\uC2DC \uC2DC\uB3C4 "),c()()()()}if(i&2){let e=g();l(5),O("\uBD84\uC11D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: ",e.analysisError)}}function kt(i,t){i&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"div",22),_(3,"ion-icon",23),a(4,"p"),d(5,"\uBD84\uC11D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!"),c()()()())}function Ft(i,t){if(i&1&&(a(0,"ion-select-option",35),d(1),c()),i&2){let e=t.$implicit;u("value",e),l(),O(" ",e," ")}}function Rt(i,t){if(i&1){let e=I();a(0,"ion-item")(1,"ion-label",25),d(2,"\uBE0C\uB79C\uB4DC\uBA85"),c(),a(3,"ion-input",36),z("ngModelChange",function(r){w(e);let o=g(2);return R(o.customBrand,r)||(o.customBrand=r),b(r)}),c()()}if(i&2){let e=g(2);l(3),F("ngModel",e.customBrand)}}function zt(i,t){if(i&1&&(a(0,"ion-select-option",35),d(1),c()),i&2){let e=t.$implicit;u("value",e),l(),O(" ",e," ")}}function Vt(i,t){if(i&1){let e=I();a(0,"ion-item")(1,"ion-label",25),d(2),c(),a(3,"ion-range",37),z("ngModelChange",function(r){w(e);let o=g(2);return R(o.productData.confidenceScore,r)||(o.productData.confidenceScore=r),b(r)}),a(4,"ion-label",0),d(5,"0%"),c(),a(6,"ion-label",3),d(7,"100%"),c()()()}if(i&2){let e=g(2);l(2),O(" \uC2E0\uB8B0\uB3C4: ",(e.productData.confidenceScore*100).toFixed(0),"% "),l(),F("ngModel",e.productData.confidenceScore)}}function jt(i,t){if(i&1&&(a(0,"ion-item")(1,"ion-label")(2,"h4"),d(3,"\uAC10\uC9C0\uB41C \uB77C\uBCA8"),c(),a(4,"p"),d(5),c()()()),i&2){let e=g(3);l(5),D(e.analysisResult.detectedLabels.join(", "))}}function Gt(i,t){if(i&1&&(a(0,"ion-item")(1,"ion-label")(2,"h4"),d(3,"\uC8FC\uC694 \uC0C9\uC0C1"),c(),a(4,"p"),d(5),c()()()),i&2){let e=g(3);l(5),D(e.analysisResult.colors.join(", "))}}function Wt(i,t){if(i&1&&(a(0,"ion-item")(1,"ion-label")(2,"h4"),d(3,"\uC608\uC0C1 \uAC00\uACA9\uB300"),c(),a(4,"p"),d(5),c()()()),i&2){let e=g(3);l(5),Ae("",e.analysisResult.estimatedPrice.min," - ",e.analysisResult.estimatedPrice.max," ",e.analysisResult.estimatedPrice.currency)}}function $t(i,t){if(i&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"h3"),d(3,"\uBD84\uC11D \uACB0\uACFC"),c(),a(4,"ion-list"),f(5,jt,6,1,"ion-item",11)(6,Gt,6,1,"ion-item",11)(7,Wt,6,3,"ion-item",11),c()()()),i&2){let e=g(2);l(5),u("ngIf",e.analysisResult.detectedLabels&&e.analysisResult.detectedLabels.length>0),l(),u("ngIf",e.analysisResult.colors&&e.analysisResult.colors.length>0),l(),u("ngIf",e.analysisResult.estimatedPrice)}}function qt(i,t){if(i&1&&(a(0,"li"),d(1),c()),i&2){let e=t.$implicit;l(),D(e)}}function Ht(i,t){if(i&1&&(a(0,"ion-card",38)(1,"ion-card-content")(2,"h3"),_(3,"ion-icon",39),d(4," \uAC80\uC99D \uC774\uC288 "),c(),a(5,"ul"),f(6,qt,2,1,"li",40),c()()()),i&2){let e=g(2);l(6),u("ngForOf",e.validationIssues)}}function Nt(i,t){if(i&1){let e=I();a(0,"div",24)(1,"ion-card")(2,"ion-card-content")(3,"h3"),d(4,"\uC0C1\uD488 \uC815\uBCF4"),c(),a(5,"ion-list")(6,"ion-item")(7,"ion-label",25),d(8,"\uC0C1\uD488\uBA85 *"),c(),a(9,"ion-input",26),z("ngModelChange",function(r){w(e);let o=g();return R(o.productData.productName,r)||(o.productData.productName=r),b(r)}),c()(),a(10,"ion-item")(11,"ion-label",25),d(12,"\uBE0C\uB79C\uB4DC"),c(),a(13,"ion-select",27),z("ngModelChange",function(r){w(e);let o=g();return R(o.productData.brand,r)||(o.productData.brand=r),b(r)}),a(14,"ion-select-option",28),d(15,"\uC120\uD0DD \uC548\uD568"),c(),f(16,Ft,2,2,"ion-select-option",29),a(17,"ion-select-option",30),d(18,"\uC9C1\uC811 \uC785\uB825"),c()()(),f(19,Rt,4,1,"ion-item",11),a(20,"ion-item")(21,"ion-label",25),d(22,"\uCE74\uD14C\uACE0\uB9AC"),c(),a(23,"ion-select",31),z("ngModelChange",function(r){w(e);let o=g();return R(o.productData.category,r)||(o.productData.category=r),b(r)}),a(24,"ion-select-option",28),d(25,"\uC120\uD0DD \uC548\uD568"),c(),f(26,zt,2,2,"ion-select-option",29),c()(),a(27,"ion-item")(28,"ion-label",25),d(29,"\uC124\uBA85"),c(),a(30,"ion-textarea",32),z("ngModelChange",function(r){w(e);let o=g();return R(o.productData.description,r)||(o.productData.description=r),b(r)}),c()(),a(31,"ion-item")(32,"ion-checkbox",33),z("ngModelChange",function(r){w(e);let o=g();return R(o.overrideConfidence,r)||(o.overrideConfidence=r),b(r)}),c(),a(33,"ion-label"),d(34,"\uC2E0\uB8B0\uB3C4 \uC218\uB3D9 \uC124\uC815"),c()(),f(35,Vt,8,2,"ion-item",11),c()()(),f(36,$t,8,3,"ion-card",11)(37,Ht,7,1,"ion-card",34),c()}if(i&2){let e=g();l(9),F("ngModel",e.productData.productName),l(4),F("ngModel",e.productData.brand),l(3),u("ngForOf",e.availableBrands),l(3),u("ngIf",e.productData.brand==="custom"),l(4),F("ngModel",e.productData.category),l(3),u("ngForOf",e.availableCategories),l(4),F("ngModel",e.productData.description),l(2),F("ngModel",e.overrideConfidence),l(3),u("ngIf",e.overrideConfidence),l(),u("ngIf",e.analysisResult),l(),u("ngIf",e.validationIssues.length>0)}}var xt=(()=>{let t=class t{constructor(n,r,o,s,m){this.modalController=n,this.productService=r,this.alertController=o,this.toastController=s,this.loadingController=m,this.isAnalyzing=!1,this.isSaving=!1,this.validationIssues=[],this.overrideConfidence=!1,this.customBrand="",this.productData={productName:"",brand:"",category:"",description:"",confidenceScore:.5},this.availableCategories=ht,this.availableBrands=yt,xe({close:we,save:pt,refresh:ut,checkmark:ve,warning:ft,information:dt})}ngOnInit(){this.analyzeProduct()}get canSave(){return!!this.productData.productName.trim()&&!this.isAnalyzing}analyzeProduct(){return p(this,null,function*(){this.isAnalyzing=!0,this.analysisError=void 0,this.validationIssues=[];try{let n=yield this.productService.uploadProductFromDataUrl(this.imageDataUrl,`product-${Date.now()}.jpg`);n.success&&n.data?(this.analysisResult=n.data.analysis,this.validationIssues=n.data.validation.issues||[],this.productData={productName:this.analysisResult.productName||"",brand:this.analysisResult.brand||"",category:this.analysisResult.category||"",description:this.analysisResult.description||"",confidenceScore:this.analysisResult.confidenceScore}):this.analysisError=n.message||"\uBD84\uC11D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."}catch(n){console.error("Product analysis failed:",n),this.analysisError="\uB124\uD2B8\uC6CC\uD06C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}finally{this.isAnalyzing=!1}})}retryAnalysis(){return p(this,null,function*(){yield this.analyzeProduct()})}saveProduct(){return p(this,null,function*(){if(!this.canSave||this.isSaving)return;let n=yield this.loadingController.create({message:"\uC0C1\uD488\uC744 \uC800\uC7A5\uD558\uB294 \uC911..."});yield n.present(),this.isSaving=!0;try{let r=this.productData.brand;this.productData.brand==="custom"&&this.customBrand.trim()&&(r=this.customBrand.trim());let o=yield this.productService.uploadProductFromDataUrl(this.imageDataUrl,`product-${Date.now()}.jpg`);if(!o.success||!o.data)throw new Error("\uC774\uBBF8\uC9C0 \uC5C5\uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");let s={receiptItemId:this.receiptItemId,imageUrl:o.data.imageUrl,productName:this.productData.productName.trim(),brand:r,category:this.productData.category,description:this.productData.description.trim(),confidenceScore:this.overrideConfidence?this.productData.confidenceScore:this.analysisResult?.confidenceScore||.5},m=yield this.productService.saveProduct(s);yield(yield this.toastController.create({message:"\uC0C1\uD488\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",duration:2e3,color:"success"})).present(),this.dismiss(!0)}catch(r){console.error("Failed to save product:",r),yield(yield this.alertController.create({header:"\uC624\uB958",message:"\uC0C1\uD488 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",buttons:["\uD655\uC778"]})).present()}finally{this.isSaving=!1,yield n.dismiss()}})}getConfidenceColor(n){return n>=.8?"success":n>=.6?"warning":"danger"}dismiss(n=!1){this.modalController.dismiss({success:n})}};t.\u0275fac=function(r){return new(r||t)(S(_e),S(be),S(fe),S(Ze),S(Xe))},t.\u0275cmp=Y({type:t,selectors:[["app-product-upload-modal"]],inputs:{imageDataUrl:"imageDataUrl",receiptItemId:"receiptItemId"},decls:20,vars:9,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end"],[3,"click","disabled"],["name","crescent",4,"ngIf"],["name","save",4,"ngIf"],[1,"image-container"],["alt","\uC5C5\uB85C\uB4DC\uB41C \uC0C1\uD488 \uC774\uBBF8\uC9C0",3,"src"],["class","confidence-badge",3,"color",4,"ngIf"],[1,"status-container"],[4,"ngIf"],["class","form-container",4,"ngIf"],["name","crescent"],["name","save"],[1,"confidence-badge",3,"color"],[1,"analysis-progress"],["type","indeterminate"],[1,"error-message"],["name","warning","color","danger"],["fill","outline","size","small",3,"click"],["name","refresh","slot","start"],[1,"analysis-success"],["name","checkmark","color","success"],[1,"form-container"],["position","stacked"],["placeholder","\uC0C1\uD488\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694","required","",3,"ngModelChange","ngModel"],["placeholder","\uBE0C\uB79C\uB4DC\uB97C \uC120\uD0DD\uD558\uC138\uC694","interface","popover",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],["placeholder","\uCE74\uD14C\uACE0\uB9AC\uB97C \uC120\uD0DD\uD558\uC138\uC694","interface","popover",3,"ngModelChange","ngModel"],["placeholder","\uC0C1\uD488 \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694","rows","3",3,"ngModelChange","ngModel"],["slot","start",3,"ngModelChange","ngModel"],["color","warning",4,"ngIf"],[3,"value"],["placeholder","\uBE0C\uB79C\uB4DC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",3,"ngModelChange","ngModel"],["min","0","max","1","step","0.1","color","primary",3,"ngModelChange","ngModel"],["color","warning"],["name","warning"],[4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"\uC0C1\uD488 \uBD84\uC11D \uBC0F \uC800\uC7A5"),c(),a(4,"ion-buttons",0)(5,"ion-button",1),x("click",function(){return o.dismiss()}),_(6,"ion-icon",2),c()(),a(7,"ion-buttons",3)(8,"ion-button",4),x("click",function(){return o.saveProduct()}),f(9,Dt,1,0,"ion-spinner",5)(10,Tt,1,0,"ion-icon",6),c()()()(),a(11,"ion-content")(12,"div",7),_(13,"ion-img",8),f(14,Lt,2,2,"ion-badge",9),c(),a(15,"div",10),f(16,Ut,7,0,"ion-card",11)(17,At,9,1,"ion-card",11)(18,kt,6,0,"ion-card",11),c(),f(19,Nt,38,11,"div",12),c()),r&2&&(l(8),u("disabled",!o.canSave||o.isSaving),l(),u("ngIf",o.isSaving),l(),u("ngIf",!o.isSaving),l(3),u("src",o.imageDataUrl),l(),u("ngIf",o.analysisResult),l(2),u("ngIf",o.isAnalyzing),l(),u("ngIf",o.analysisError),l(),u("ngIf",o.analysisResult&&!o.isAnalyzing),l(),u("ngIf",o.analysisResult||o.analysisError))},dependencies:[Z,Q,X,ee,ke,Re,Fe,ce,Ce,ge,ae,ie,ne,he,se,de,tt,it,Pe,pe,le,te,oe,re,ue,He,me,et,ye],styles:[".image-container[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden}.image-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-container[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;font-size:12px;padding:4px 8px}.status-container[_ngcontent-%COMP%]{padding:16px}.analysis-progress[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .analysis-success[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.analysis-progress[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .analysis-success[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.analysis-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .analysis-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;flex:1}.form-container[_ngcontent-%COMP%]{padding:0 16px 16px}h3[_ngcontent-%COMP%]{margin:0 0 16px;color:var(--ion-color-dark);font-size:18px;font-weight:600;display:flex;align-items:center;gap:8px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:8px 0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:600;color:var(--ion-color-dark)}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--ion-color-medium)}ul[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px;font-size:14px}"]});let i=t;return i})();var $=function(i){return i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE",i}($||{}),L=class extends Error{constructor(t,e,n){super(t),this.message=t,this.code=e,this.data=n}},Kt=i=>{var t,e;return i?.androidBridge?"android":!((e=(t=i?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||e===void 0)&&e.bridge?"ios":"web"},Jt=i=>{let t=i.CapacitorCustomPlatform||null,e=i.Capacitor||{},n=e.Plugins=e.Plugins||{},r=()=>t!==null?t.name:Kt(i),o=()=>r()!=="web",s=h=>{let y=P.get(h);return!!(y?.platforms.has(r())||m(h))},m=h=>{var y;return(y=e.PluginHeaders)===null||y===void 0?void 0:y.find(N=>N.name===h)},C=h=>i.console.error(h),P=new Map,j=(h,y={})=>{let N=P.get(h);if(N)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),N.proxy;let V=r(),G=m(h),T,bt=()=>p(null,null,function*(){return!T&&V in y?T=typeof y[V]=="function"?T=yield y[V]():T=y[V]:t!==null&&!T&&"web"in y&&(T=typeof y.web=="function"?T=yield y.web():T=y.web),T}),Mt=(v,M)=>{var B,A;if(G){let k=G?.methods.find(E=>M===E.name);if(k)return k.rtype==="promise"?E=>e.nativePromise(h,M.toString(),E):(E,K)=>e.nativeCallback(h,M.toString(),E,K);if(v)return(B=v[M])===null||B===void 0?void 0:B.bind(v)}else{if(v)return(A=v[M])===null||A===void 0?void 0:A.bind(v);throw new L(`"${h}" plugin is not implemented on ${V}`,$.Unimplemented)}},Ee=v=>{let M,B=(...A)=>{let k=bt().then(E=>{let K=Mt(E,v);if(K){let J=K(...A);return M=J?.remove,J}else throw new L(`"${h}.${v}()" is not implemented on ${V}`,$.Unimplemented)});return v==="addListener"&&(k.remove=()=>p(null,null,function*(){return M()})),k};return B.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(B,"name",{value:v,writable:!1,configurable:!1}),B},Le=Ee("addListener"),Ue=Ee("removeListener"),Ot=(v,M)=>{let B=Le({eventName:v},M),A=()=>p(null,null,function*(){let E=yield B;Ue({eventName:v,callbackId:E},M)}),k=new Promise(E=>B.then(()=>E({remove:A})));return k.remove=()=>p(null,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield A()}),k},Se=new Proxy({},{get(v,M){switch(M){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return G?Ot:Le;case"removeListener":return Ue;default:return Ee(M)}}});return n[h]=Se,P.set(h,{name:h,proxy:Se,platforms:new Set([...Object.keys(y),...G?[V]:[]])}),Se};return e.convertFileSrc||(e.convertFileSrc=h=>h),e.getPlatform=r,e.handleError=C,e.isNativePlatform=o,e.isPluginAvailable=s,e.registerPlugin=j,e.Exception=L,e.DEBUG=!!e.DEBUG,e.isLoggingEnabled=!!e.isLoggingEnabled,e},Yt=i=>i.Capacitor=Jt(i),Ie=Yt(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Me=Ie.registerPlugin,W=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,e){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(e);let o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(t);let s=()=>p(this,null,function*(){return this.removeListener(t,e)});return Promise.resolve({remove:s})}removeAllListeners(){return p(this,null,function*(){this.listeners={};for(let t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}})}notifyListeners(t,e,n){let r=this.listeners[t];if(!r){if(n){let o=this.retainedEventArguments[t];o||(o=[]),o.push(e),this.retainedEventArguments[t]=o}return}r.forEach(o=>o(e))}hasListeners(t){var e;return!!(!((e=this.listeners[t])===null||e===void 0)&&e.length)}registerWindowListener(t,e){this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:n=>{this.notifyListeners(e,n)}}}unimplemented(t="not implemented"){return new Ie.Exception(t,$.Unimplemented)}unavailable(t="not available"){return new Ie.Exception(t,$.Unavailable)}removeListener(t,e){return p(this,null,function*(){let n=this.listeners[t];if(!n)return;let r=n.indexOf(e);this.listeners[t].splice(r,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])})}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){let e=this.retainedEventArguments[t];e&&(delete this.retainedEventArguments[t],e.forEach(n=>{this.notifyListeners(t,n)}))}};var vt=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),wt=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Be=class extends W{getCookies(){return p(this,null,function*(){let t=document.cookie,e={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[r,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=wt(r).trim(),o=wt(o).trim(),e[r]=o}),e})}setCookie(t){return p(this,null,function*(){try{let e=vt(t.key),n=vt(t.value),r=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${n||""}${r}; path=${o}; ${s};`}catch(e){return Promise.reject(e)}})}deleteCookie(t){return p(this,null,function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}})}clearCookies(){return p(this,null,function*(){try{let t=document.cookie.split(";")||[];for(let e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})}clearAllCookies(){return p(this,null,function*(){try{yield this.clearCookies()}catch(t){return Promise.reject(t)}})}},On=Me("CapacitorCookies",{web:()=>new Be}),Qt=i=>p(null,null,function*(){return new Promise((t,e)=>{let n=new FileReader;n.onload=()=>{let r=n.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>e(r),n.readAsDataURL(i)})}),Xt=(i={})=>{let t=Object.keys(i);return Object.keys(i).map(r=>r.toLocaleLowerCase()).reduce((r,o,s)=>(r[o]=i[t[s]],r),{})},Zt=(i,t=!0)=>i?Object.entries(i).reduce((n,r)=>{let[o,s]=r,m,C;return Array.isArray(s)?(C="",s.forEach(P=>{m=t?encodeURIComponent(P):P,C+=`${o}=${m}&`}),C.slice(0,-1)):(m=t?encodeURIComponent(s):s,C=`${o}=${m}`),`${n}&${C}`},"").substr(1):null,en=(i,t={})=>{let e=Object.assign({method:i.method||"GET",headers:i.headers},t),r=Xt(i.headers)["content-type"]||"";if(typeof i.data=="string")e.body=i.data;else if(r.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams;for(let[s,m]of Object.entries(i.data||{}))o.set(s,m);e.body=o.toString()}else if(r.includes("multipart/form-data")||i.data instanceof FormData){let o=new FormData;if(i.data instanceof FormData)i.data.forEach((m,C)=>{o.append(C,m)});else for(let m of Object.keys(i.data))o.append(m,i.data[m]);e.body=o;let s=new Headers(e.headers);s.delete("content-type"),e.headers=s}else(r.includes("application/json")||typeof i.data=="object")&&(e.body=JSON.stringify(i.data));return e},De=class extends W{request(t){return p(this,null,function*(){let e=en(t,t.webFetchExtra),n=Zt(t.params,t.shouldEncodeUrlParams),r=n?`${t.url}?${n}`:t.url,o=yield fetch(r,e),s=o.headers.get("content-type")||"",{responseType:m="text"}=o.ok?t:{};s.includes("application/json")&&(m="json");let C,P;switch(m){case"arraybuffer":case"blob":P=yield o.blob(),C=yield Qt(P);break;case"json":C=yield o.json();break;case"document":case"text":default:C=yield o.text()}let j={};return o.headers.forEach((h,y)=>{j[y]=h}),{data:C,headers:j,status:o.status,url:o.url}})}get(t){return p(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))})}post(t){return p(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))})}put(t){return p(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))})}patch(t){return p(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})}delete(t){return p(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})}},En=Me("CapacitorHttp",{web:()=>new De});var U=function(i){return i.Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS",i}(U||{}),q=function(i){return i.Rear="REAR",i.Front="FRONT",i}(q||{}),Oe=function(i){return i.Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",i}(Oe||{});var H=class extends W{getPhoto(t){return p(this,null,function*(){return new Promise((e,n)=>p(this,null,function*(){if(t.webUseInput||t.source===U.Photos)this.fileInputExperience(t,e,n);else if(t.source===U.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=t.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",o=>p(this,null,function*(){o.detail===0?this.fileInputExperience(t,e,n):this.cameraExperience(t,e,n)}))}else this.cameraExperience(t,e,n)}))})}pickImages(t){return p(this,null,function*(){return new Promise((e,n)=>p(this,null,function*(){this.multipleFileInputExperience(e,n)}))})}cameraExperience(t,e,n){return p(this,null,function*(){if(customElements.get("pwa-camera-modal")){let r=document.createElement("pwa-camera-modal");r.facingMode=t.direction===q.Front?"user":"environment",document.body.appendChild(r);try{yield r.componentOnReady(),r.addEventListener("onPhoto",o=>p(this,null,function*(){let s=o.detail;s===null?n(new L("User cancelled photos app")):s instanceof Error?n(s):e(yield this._getCameraPhoto(s,t)),r.dismiss(),document.body.removeChild(r)})),r.present()}catch{this.fileInputExperience(t,e,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,e,n)})}fileInputExperience(t,e,n){let r=document.querySelector("#_capacitor-camera-input"),o=()=>{var s;(s=r.parentNode)===null||s===void 0||s.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",s=>{let m=r.files[0],C="jpeg";if(m.type==="image/png"?C="png":m.type==="image/gif"&&(C="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){let P=new FileReader;P.addEventListener("load",()=>{if(t.resultType==="dataUrl")e({dataUrl:P.result,format:C});else if(t.resultType==="base64"){let j=P.result.split(",")[1];e({base64String:j,format:C})}o()}),P.readAsDataURL(m)}else e({webPath:URL.createObjectURL(m),format:C}),o()}),r.addEventListener("cancel",s=>{n(new L("User cancelled photos app")),o()})),r.accept="image/*",r.capture=!0,t.source===U.Photos||t.source===U.Prompt?r.removeAttribute("capture"):t.direction===q.Front?r.capture="user":t.direction===q.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(t,e){let n=document.querySelector("#_capacitor-camera-input-multiple"),r=()=>{var o;(o=n.parentNode)===null||o===void 0||o.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",o=>{let s=[];for(let m=0;m<n.files.length;m++){let C=n.files[m],P="jpeg";C.type==="image/png"?P="png":C.type==="image/gif"&&(P="gif"),s.push({webPath:URL.createObjectURL(C),format:P})}t({photos:s}),r()}),n.addEventListener("cancel",o=>{e(new L("User cancelled photos app")),r()})),n.accept="image/*",n.click()}_getCameraPhoto(t,e){return new Promise((n,r)=>{let o=new FileReader,s=t.type.split("/")[1];e.resultType==="uri"?n({webPath:URL.createObjectURL(t),format:s,saved:!1}):(o.readAsDataURL(t),o.onloadend=()=>{let m=o.result;e.resultType==="dataUrl"?n({dataUrl:m,format:s,saved:!1}):n({base64String:m.split(",")[1],format:s,saved:!1})},o.onerror=m=>{r(m)})})}checkPermissions(){return p(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return p(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return p(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return p(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},Ln=new H;var Te=Me("Camera",{web:()=>new H});function tn(i,t){if(i&1&&(a(0,"ion-select-option",24),d(1),c()),i&2){let e=t.$implicit;u("value",e),l(),O(" ",e," ")}}function nn(i,t){if(i&1&&(a(0,"ion-select-option",24),d(1),c()),i&2){let e=t.$implicit;u("value",e),l(),O(" ",e," ")}}function on(i,t){if(i&1){let e=I();a(0,"ion-chip",25),x("click",function(){w(e);let r=g();return b(r.clearFilters())}),_(1,"ion-icon",26),a(2,"ion-label"),d(3,"\uD544\uD130 \uCD08\uAE30\uD654"),c()()}}function rn(i,t){i&1&&(a(0,"div",27),_(1,"ion-spinner",28),a(2,"p"),d(3,"\uC0C1\uD488\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."),c()())}function an(i,t){if(i&1){let e=I();a(0,"div",29),_(1,"ion-icon",30),a(2,"h2"),d(3,"\uC0C1\uD488\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),c(),a(4,"p"),d(5,"\uC0C1\uD488 \uC0AC\uC9C4\uC744 \uCD94\uAC00\uD574\uBCF4\uC138\uC694!"),c(),a(6,"ion-button",31),x("click",function(){w(e);let r=g();return b(r.showAddProductOptions())}),_(7,"ion-icon",32),d(8," \uC0C1\uD488 \uCD94\uAC00 "),c()()}}function cn(i,t){if(i&1&&(a(0,"p",42),d(1),c()),i&2){let e=g().$implicit;l(),D(e.brand)}}function ln(i,t){if(i&1&&(a(0,"ion-chip",43),d(1),c()),i&2){let e=g().$implicit;l(),O(" ",e.category," ")}}function sn(i,t){if(i&1){let e=I();a(0,"ion-col",34)(1,"ion-card",35),x("click",function(){let r=w(e).$implicit,o=g(2);return b(o.openProductDetail(r))}),a(2,"div",36),_(3,"ion-img",37),a(4,"ion-badge",38),d(5),c()(),a(6,"ion-card-content")(7,"h3",39),d(8),c(),f(9,cn,2,1,"p",40)(10,ln,2,1,"ion-chip",41),c()()()}if(i&2){let e=t.$implicit,n=g(2);l(3),u("src",e.imageUrl)("alt",e.productName||"\uC0C1\uD488 \uC774\uBBF8\uC9C0"),l(),u("color",n.getConfidenceColor(e.confidenceScore)),l(),O(" ",n.getConfidenceText(e.confidenceScore)," "),l(3),D(e.productName||"\uC54C \uC218 \uC5C6\uB294 \uC0C1\uD488"),l(),u("ngIf",e.brand),l(),u("ngIf",e.category)}}function dn(i,t){if(i&1&&(a(0,"ion-grid")(1,"ion-row"),f(2,sn,11,7,"ion-col",33),c()()),i&2){let e=g();l(2),u("ngForOf",e.filteredProducts)}}function un(i,t){if(i&1&&(a(0,"p"),d(1),c()),i&2){let e=g().$implicit;l(),D(e.brand)}}function pn(i,t){if(i&1&&(a(0,"p",52),d(1),c()),i&2){let e=g().$implicit;l(),D(e.description)}}function mn(i,t){if(i&1&&(a(0,"ion-chip",43),d(1),c()),i&2){let e=g().$implicit;l(),O(" ",e.category," ")}}function gn(i,t){if(i&1){let e=I();a(0,"ion-item",45),x("click",function(){let r=w(e).$implicit,o=g(2);return b(o.openProductDetail(r))}),a(1,"ion-thumbnail",46),_(2,"ion-img",37),c(),a(3,"ion-label")(4,"h2"),d(5),c(),f(6,un,2,1,"p",20)(7,pn,2,1,"p",47),a(8,"div",48),f(9,mn,2,1,"ion-chip",41),a(10,"ion-badge",49),d(11),c()()(),a(12,"ion-button",50),x("click",function(r){let o=w(e).$implicit;return g(2).deleteProduct(o),b(r.stopPropagation())}),_(13,"ion-icon",51),c()()}if(i&2){let e=t.$implicit,n=g(2);l(2),u("src",e.imageUrl)("alt",e.productName||"\uC0C1\uD488 \uC774\uBBF8\uC9C0"),l(3),D(e.productName||"\uC54C \uC218 \uC5C6\uB294 \uC0C1\uD488"),l(),u("ngIf",e.brand),l(),u("ngIf",e.description),l(2),u("ngIf",e.category),l(),u("color",n.getConfidenceColor(e.confidenceScore)),l(),O(" ",n.getConfidenceText(e.confidenceScore)," ")}}function Cn(i,t){if(i&1&&(a(0,"ion-list"),f(1,gn,14,8,"ion-item",44),c()),i&2){let e=g();l(),u("ngForOf",e.filteredProducts)}}function _n(i,t){if(i&1){let e=I();a(0,"ion-infinite-scroll",53),x("ionInfinite",function(r){w(e);let o=g();return b(o.loadMore(r))}),_(1,"ion-infinite-scroll-content",54),c()}}var Kn=(()=>{let t=class t{constructor(n,r,o,s){this.productService=n,this.modalController=r,this.alertController=o,this.actionSheetController=s,this.products=[],this.filteredProducts=[],this.categories=[],this.brands=[],this.selectedCategory="",this.selectedBrand="",this.searchTerm="",this.minConfidence=.3,this.isLoading=!1,this.hasMore=!0,this.currentPage=0,this.pageSize=20,this.viewMode="grid",xe({camera:rt,images:st,add:ot,filter:lt,search:mt,eye:ct,create:at,trash:_t,close:we,checkmark:ve,star:gt,starOutline:Ct})}ngOnInit(){this.loadProducts()}doRefresh(n){return p(this,null,function*(){this.currentPage=0,this.hasMore=!0,yield this.loadProducts(!0),n.target.complete()})}loadProducts(n=!1){return p(this,null,function*(){if(!(this.isLoading&&!n)){this.isLoading=!0;try{let r={category:this.selectedCategory||void 0,brand:this.selectedBrand||void 0,minConfidence:this.minConfidence,limit:this.pageSize,offset:n?0:this.currentPage*this.pageSize},o=yield this.productService.getProductGallery(r);n?(this.products=o,this.currentPage=0):this.products=[...this.products,...o],this.hasMore=o.length===this.pageSize,this.currentPage++,this.applyFilters(),this.extractFilterOptions()}catch(r){console.error("Failed to load products:",r),this.showErrorAlert("\uC0C1\uD488\uC744 \uBD88\uB7EC\uC624\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isLoading=!1}}})}loadMore(n){return p(this,null,function*(){yield this.loadProducts(),n.target.complete()})}applyFilters(){this.filteredProducts=this.products.filter(n=>{let r=!this.searchTerm||n.productName?.toLowerCase().includes(this.searchTerm.toLowerCase())||n.brand?.toLowerCase().includes(this.searchTerm.toLowerCase())||n.description?.toLowerCase().includes(this.searchTerm.toLowerCase()),o=!this.selectedCategory||n.category===this.selectedCategory,s=!this.selectedBrand||n.brand===this.selectedBrand,m=n.confidenceScore>=this.minConfidence;return r&&o&&s&&m})}extractFilterOptions(){let n=new Set,r=new Set;this.products.forEach(o=>{o.category&&n.add(o.category),o.brand&&r.add(o.brand)}),this.categories=Array.from(n).sort(),this.brands=Array.from(r).sort()}onSearchChange(n){this.searchTerm=n.detail.value,this.applyFilters()}onCategoryChange(n){this.selectedCategory=n.detail.value,this.applyFilters()}onBrandChange(n){this.selectedBrand=n.detail.value,this.applyFilters()}onConfidenceChange(n){this.minConfidence=n.detail.value,this.applyFilters()}clearFilters(){this.selectedCategory="",this.selectedBrand="",this.searchTerm="",this.minConfidence=.3,this.applyFilters()}toggleViewMode(){this.viewMode=this.viewMode==="grid"?"list":"grid"}showAddProductOptions(){return p(this,null,function*(){yield(yield this.actionSheetController.create({header:"\uC0C1\uD488 \uC0AC\uC9C4 \uCD94\uAC00",buttons:[{text:"\uCE74\uBA54\uB77C\uB85C \uCD2C\uC601",icon:"camera",handler:()=>{this.captureProductImage()}},{text:"\uAC24\uB7EC\uB9AC\uC5D0\uC11C \uC120\uD0DD",icon:"images",handler:()=>{this.selectFromGallery()}},{text:"\uCDE8\uC18C",icon:"close",role:"cancel"}]})).present()})}captureProductImage(){return p(this,null,function*(){try{let n=yield Te.getPhoto({quality:90,allowEditing:!1,resultType:Oe.DataUrl,source:U.Camera});n.dataUrl&&(yield this.openUploadModal(n.dataUrl))}catch(n){console.error("Camera capture failed:",n),this.showErrorAlert("\uCE74\uBA54\uB77C \uCD2C\uC601\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}selectFromGallery(){return p(this,null,function*(){try{let n=yield Te.getPhoto({quality:90,allowEditing:!1,resultType:Oe.DataUrl,source:U.Photos});n.dataUrl&&(yield this.openUploadModal(n.dataUrl))}catch(n){console.error("Gallery selection failed:",n),this.showErrorAlert("\uAC24\uB7EC\uB9AC\uC5D0\uC11C \uC774\uBBF8\uC9C0\uB97C \uC120\uD0DD\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}openUploadModal(n){return p(this,null,function*(){let r=yield this.modalController.create({component:xt,componentProps:{imageDataUrl:n}});r.onDidDismiss().then(o=>{o.data?.success&&this.loadProducts(!0)}),yield r.present()})}openProductDetail(n){return p(this,null,function*(){let r=yield this.modalController.create({component:Pt,componentProps:{product:n}});r.onDidDismiss().then(o=>{o.data?.updated&&this.loadProducts(!0)}),yield r.present()})}deleteProduct(n){return p(this,null,function*(){yield(yield this.alertController.create({header:"\uC0C1\uD488 \uC0AD\uC81C",message:"\uC774 \uC0C1\uD488\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",buttons:[{text:"\uCDE8\uC18C",role:"cancel"},{text:"\uC0AD\uC81C",role:"destructive",handler:()=>p(this,null,function*(){try{yield this.productService.deleteProduct(n.id),this.products=this.products.filter(o=>o.id!==n.id),this.applyFilters()}catch(o){console.error("Failed to delete product:",o),this.showErrorAlert("\uC0C1\uD488 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}]})).present()})}getConfidenceColor(n){return n>=.8?"success":n>=.6?"warning":"danger"}getConfidenceText(n){return n>=.8?"\uB192\uC74C":n>=.6?"\uBCF4\uD1B5":"\uB0AE\uC74C"}showErrorAlert(n){return p(this,null,function*(){yield(yield this.alertController.create({header:"\uC624\uB958",message:n,buttons:["\uD655\uC778"]})).present()})}};t.\u0275fac=function(r){return new(r||t)(S(be),S(_e),S(fe),S(Qe))},t.\u0275cmp=Y({type:t,selectors:[["app-product-gallery"]],decls:38,vars:16,consts:[[3,"translucent"],["slot","end"],[3,"click"],[3,"name"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","fixed",3,"ionRefresh"],[1,"filters-container"],["placeholder","\uC0C1\uD488\uBA85, \uBE0C\uB79C\uB4DC, \uC124\uBA85 \uAC80\uC0C9","show-clear-button","focus",3,"ionInput","value"],[1,"filter-chips"],["placeholder","\uCE74\uD14C\uACE0\uB9AC","interface","popover",3,"ionChange","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","\uBE0C\uB79C\uB4DC","interface","popover",3,"ionChange","value"],["color","primary",3,"click",4,"ngIf"],[1,"confidence-filter"],["min","0","max","1","step","0.1","color","primary",3,"ionChange","value"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add"],[3,"value"],["color","primary",3,"click"],["name","close"],[1,"loading-container"],["name","crescent"],[1,"empty-state"],["name","images","size","large"],["fill","outline",3,"click"],["name","add","slot","start"],["size","6","size-md","4","size-lg","3",4,"ngFor","ngForOf"],["size","6","size-md","4","size-lg","3"],[1,"product-card",3,"click"],[1,"image-container"],[3,"src","alt"],[1,"confidence-badge",3,"color"],[1,"product-name"],["class","product-brand",4,"ngIf"],["color","secondary","size","small",4,"ngIf"],[1,"product-brand"],["color","secondary","size","small"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["slot","start"],["class","description",4,"ngIf"],[1,"item-footer"],[3,"color"],["slot","end","fill","clear",3,"click"],["name","trash","color","danger"],[1,"description"],[3,"ionInfinite"],["loading-spinner","bubbles","loading-text","\uB354 \uB9CE\uC740 \uC0C1\uD488\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."]],template:function(r,o){r&1&&(a(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"\uC0C1\uD488 \uAC24\uB7EC\uB9AC"),c(),a(4,"ion-buttons",1)(5,"ion-button",2),x("click",function(){return o.toggleViewMode()}),_(6,"ion-icon",3),c()()()(),a(7,"ion-content",4)(8,"ion-header",5)(9,"ion-toolbar")(10,"ion-title",6),d(11,"\uC0C1\uD488 \uAC24\uB7EC\uB9AC"),c()()(),a(12,"ion-refresher",7),x("ionRefresh",function(m){return o.doRefresh(m)}),_(13,"ion-refresher-content"),c(),a(14,"div",8)(15,"ion-searchbar",9),x("ionInput",function(m){return o.onSearchChange(m)}),c(),a(16,"div",10)(17,"ion-select",11),x("ionChange",function(m){return o.onCategoryChange(m)}),a(18,"ion-select-option",12),d(19,"\uC804\uCCB4"),c(),f(20,tn,2,2,"ion-select-option",13),c(),a(21,"ion-select",14),x("ionChange",function(m){return o.onBrandChange(m)}),a(22,"ion-select-option",12),d(23,"\uC804\uCCB4"),c(),f(24,nn,2,2,"ion-select-option",13),c(),f(25,on,4,0,"ion-chip",15),c(),a(26,"div",16)(27,"ion-label"),d(28),c(),a(29,"ion-range",17),x("ionChange",function(m){return o.onConfidenceChange(m)}),c()()(),f(30,rn,4,0,"div",18)(31,an,9,0,"div",19)(32,dn,3,1,"ion-grid",20)(33,Cn,2,1,"ion-list",20)(34,_n,2,0,"ion-infinite-scroll",21),a(35,"ion-fab",22)(36,"ion-fab-button",2),x("click",function(){return o.showAddProductOptions()}),_(37,"ion-icon",23),c()()()),r&2&&(u("translucent",!0),l(6),u("name",o.viewMode==="grid"?"list":"grid"),l(),u("fullscreen",!0),l(8),u("value",o.searchTerm),l(2),u("value",o.selectedCategory),l(3),u("ngForOf",o.categories),l(),u("value",o.selectedBrand),l(3),u("ngForOf",o.brands),l(),u("ngIf",o.selectedCategory||o.selectedBrand||o.searchTerm),l(3),O("\uC2E0\uB8B0\uB3C4 \uCD5C\uC18C\uAC12: ",o.minConfidence*100,"%"),l(),u("value",o.minConfidence),l(),u("ngIf",o.isLoading&&o.products.length===0),l(),u("ngIf",!o.isLoading&&o.filteredProducts.length===0),l(),u("ngIf",o.viewMode==="grid"&&o.filteredProducts.length>0),l(),u("ngIf",o.viewMode==="list"&&o.filteredProducts.length>0),l(),u("ngIf",o.hasMore&&o.filteredProducts.length>0))},dependencies:[Z,Q,X,ee,ce,Ce,ge,ae,ie,ne,he,oe,re,ue,se,de,Ye,le,te,nt,Pe,pe,je,Ge,We,Je,Ve,$e,qe,Ne,Ke,ze,me,ye],styles:[".filters-container[_ngcontent-%COMP%]{padding:16px;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-medium)}.filters-container[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;align-items:center}.filters-container[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{min-width:120px;max-width:150px}.filters-container[_ngcontent-%COMP%]   .confidence-filter[_ngcontent-%COMP%]{margin-top:16px}.filters-container[_ngcontent-%COMP%]   .confidence-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium-shade);margin-bottom:8px;display:block}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin:0 0 8px;font-size:24px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0 0 24px;font-size:16px}.product-card[_ngcontent-%COMP%]{margin:0;height:100%;cursor:pointer;transition:transform .2s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.product-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative;height:150px;overflow:hidden}.product-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;font-size:10px;padding:2px 6px}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:12px;height:80px;display:flex;flex-direction:column;justify-content:space-between}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0 0 4px;color:var(--ion-color-dark);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .product-brand[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);margin:0 0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{align-self:flex-start;font-size:10px;height:20px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:16px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 4px;color:var(--ion-color-dark)}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium);margin:0 0 4px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p.description[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:10px;height:20px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-footer[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:10px}@media (max-width: 768px){.filters-container[_ngcontent-%COMP%]{padding:12px}.filters-container[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{min-width:100px;max-width:120px}.product-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{height:120px}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px;height:70px}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:13px}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .product-brand[_ngcontent-%COMP%]{font-size:11px}}@media (prefers-color-scheme: dark){.filters-container[_ngcontent-%COMP%]{background:var(--ion-color-dark);border-bottom-color:var(--ion-color-medium-tint)}.product-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{color:var(--ion-color-light)}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-light)}}"]});let i=t;return i})();export{Kn as ProductGalleryPage};
