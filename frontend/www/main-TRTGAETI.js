import{a as M}from"./chunk-SWOL7D6U.js";import{a as P,b as h}from"./chunk-YVEAZIJE.js";import{L as rn,U as cn,a as tn,aa as sn,n as en,p as on}from"./chunk-BXN76OUI.js";import{$b as q,Ba as B,Ca as $,E as c,F as g,Fa as F,Ga as H,H as _,Ia as N,Ka as Y,L as C,La as G,Ma as X,Nb as Z,O as m,P as f,Q as a,R as s,S as u,W as v,X as x,Y as l,b as w,da as R,e as k,fa as p,ga as D,gc as nn,ha as O,ia as I,j as E,jb as J,l as A,lb as K,m as z,nb as Q,oa as L,ob as U,pb as W,r as T,u as j,w as S,wa as V,x as b}from"./chunk-TEVF6OOM.js";import"./chunk-5HJQGQPL.js";import"./chunk-7KGURMOZ.js";import"./chunk-7NBBWGH4.js";import"./chunk-MYTP3L75.js";import"./chunk-HDBTADGC.js";import"./chunk-YSN7XVTD.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-F5TKO3NK.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var an=[{path:"",loadChildren:()=>import("./chunk-6MV7DS53.js").then(n=>n.routes)},{path:"receipt-detail/:id",loadComponent:()=>import("./chunk-72MOSD4K.js").then(n=>n.ReceiptDetailPage)},{path:"travel-plans",loadComponent:()=>import("./chunk-V5OVYG7J.js").then(n=>n.TravelPlansPage)},{path:"product-gallery",loadComponent:()=>import("./chunk-4H5IL23E.js").then(n=>n.ProductGalleryPage)},{path:"settings",loadComponent:()=>import("./chunk-SL2QNB5Y.js").then(n=>n.SettingsPage)},{path:"accessibility-settings",loadComponent:()=>import("./chunk-V3I2NBCQ.js").then(n=>n.AccessibilitySettingsComponent)}];var _n=n=>({count:n});function On(n,e){if(n&1&&(a(0,"span",14),p(1),s()),n&2){let i=l();c(),I(" ",i.i18nService.translate("offline.lastSync"),": ",i.formatLastSync()," ")}}function Pn(n,e){if(n&1&&(a(0,"ion-badge",15),p(1),s()),n&2){let i=l();m("aria-label",i.i18nService.translate("offline.pendingActions",L(2,_n,i.syncStatus.pendingActions.toString()))),c(),O(" ",i.syncStatus.pendingActions," ")}}function hn(n,e){if(n&1){let i=v();a(0,"ion-button",16),x("click",function(){S(i);let r=l();return b(r.onRetrySync())}),u(1,"ion-icon",17),s()}if(n&2){let i=l();m("aria-label",i.i18nService.translate("offline.retrySync"))}}function Mn(n,e){if(n&1){let i=v();a(0,"ion-button",18),x("click",function(){S(i);let r=l();return b(r.onDismissError())}),u(1,"ion-icon",19),s()}if(n&2){let i=l();m("aria-label",i.i18nService.translate("common.dismiss"))}}function yn(n,e){if(n&1&&u(0,"ion-progress-bar",20),n&2){let i=l();m("aria-label",i.i18nService.translate("offline.syncProgress"))}}function Sn(n,e){if(n&1&&(a(0,"span"),p(1),s()),n&2){let i=l();c(),O(" ",i.i18nService.translate("offline.screenReaderOffline")," ")}}function bn(n,e){if(n&1&&(a(0,"span"),p(1),s()),n&2){let i=l();c(),O(" ",i.i18nService.translate("offline.screenReaderSyncing")," ")}}function vn(n,e){if(n&1&&(a(0,"span"),p(1),s()),n&2){let i=l();c(),I(" ",i.i18nService.translate("offline.screenReaderError"),": ",i.syncStatus.syncError," ")}}var fn=(()=>{let e=class e{constructor(t,r,o){this.offlineService=t,this.i18nService=r,this.accessibilityService=o,this.syncStatus={isOnline:!0,lastSync:null,pendingActions:0,syncInProgress:!1,syncError:null},this.subscriptions=[],this.showIndicator=!1,tn({cloudOfflineOutline:on,cloudDoneOutline:en,syncOutline:cn,warningOutline:sn,refreshOutline:rn})}ngOnInit(){let t=this.offlineService.syncStatus$.subscribe(r=>{let o=!this.syncStatus.isOnline,d=r.isOnline;this.syncStatus=r,this.updateIndicatorVisibility(),o&&d?this.announceStatusChange("Back online. Syncing data..."):!o&&!d&&this.announceStatusChange("You are now offline. Changes will be saved locally.")});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}updateIndicatorVisibility(){this.showIndicator=!this.syncStatus.isOnline||this.syncStatus.pendingActions>0||this.syncStatus.syncInProgress||!!this.syncStatus.syncError}onRetrySync(){this.syncStatus.isOnline&&!this.syncStatus.syncInProgress&&(this.offlineService.syncPendingActions(),this.announceStatusChange("Retrying sync..."))}onDismissError(){this.announceStatusChange("Error dismissed")}announceStatusChange(t){this.accessibilityService.announceToScreenReader(this.i18nService.translate("offline.statusChange")+": "+t)}getStatusIcon(){return this.syncStatus.isOnline?this.syncStatus.syncInProgress?"sync-outline":this.syncStatus.syncError?"warning-outline":this.syncStatus.pendingActions>0?"refresh-outline":"cloud-done-outline":"cloud-offline-outline"}getStatusMessage(){return this.syncStatus.isOnline?this.syncStatus.syncInProgress?this.i18nService.translate("offline.syncing"):this.syncStatus.syncError?this.i18nService.translate("offline.syncError"):this.syncStatus.pendingActions>0?this.i18nService.translate("offline.pendingSync",{count:this.syncStatus.pendingActions.toString()}):this.i18nService.translate("offline.allSynced"):this.i18nService.translate("offline.message")}getStatusColor(){return this.syncStatus.isOnline?this.syncStatus.syncError?"danger":this.syncStatus.syncInProgress||this.syncStatus.pendingActions>0?"primary":"success":"warning"}formatLastSync(){if(!this.syncStatus.lastSync)return this.i18nService.translate("offline.neverSynced");let t=new Date,r=new Date(this.syncStatus.lastSync),o=t.getTime()-r.getTime(),d=Math.floor(o/(1e3*60)),y=Math.floor(d/60),un=Math.floor(y/24);return d<1?this.i18nService.translate("offline.justNow"):d<60?this.i18nService.translate("offline.minutesAgo",{minutes:d.toString()}):y<24?this.i18nService.translate("offline.hoursAgo",{hours:y.toString()}):this.i18nService.translate("offline.daysAgo",{days:un.toString()})}};e.\u0275fac=function(r){return new(r||e)(g(M),g(P),g(h))},e.\u0275cmp=_({type:e,selectors:[["app-offline-indicator"]],decls:17,vars:21,consts:[["role","status",1,"offline-indicator"],[1,"indicator-content"],[1,"status-info"],["aria-hidden","true",3,"name","color"],[1,"status-text"],[1,"status-message"],["class","last-sync",4,"ngIf"],[1,"status-actions"],["color","primary",4,"ngIf"],["fill","clear","size","small","color","danger",3,"click",4,"ngIf"],["fill","clear","size","small","color","medium",3,"click",4,"ngIf"],["type","indeterminate","color","primary",4,"ngIf"],["aria-live","polite","aria-atomic","true",1,"sr-only"],[4,"ngIf"],[1,"last-sync"],["color","primary"],["fill","clear","size","small","color","danger",3,"click"],["name","refresh-outline","slot","icon-only"],["fill","clear","size","small","color","medium",3,"click"],["name","close-outline","slot","icon-only"],["type","indeterminate","color","primary"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),u(3,"ion-icon",3),a(4,"div",4)(5,"span",5),p(6),s(),C(7,On,2,2,"span",6),s()(),a(8,"div",7),C(9,Pn,2,4,"ion-badge",8)(10,hn,2,1,"ion-button",9)(11,Mn,2,1,"ion-button",10),s()(),C(12,yn,1,1,"ion-progress-bar",11),s(),a(13,"div",12),C(14,Sn,2,1,"span",13)(15,bn,2,1,"span",13)(16,vn,2,2,"span",13),s()),r&2&&(R("show",o.showIndicator)("offline",!o.syncStatus.isOnline)("syncing",o.syncStatus.syncInProgress)("error",!!o.syncStatus.syncError),m("aria-live",o.syncStatus.syncInProgress?"polite":"off")("aria-label",o.getStatusMessage()),c(3),f("name",o.getStatusIcon())("color",o.getStatusColor()),c(3),D(o.getStatusMessage()),c(),f("ngIf",o.syncStatus.lastSync&&o.syncStatus.isOnline),c(2),f("ngIf",o.syncStatus.pendingActions>0),c(),f("ngIf",o.syncStatus.syncError&&o.syncStatus.isOnline),c(),f("ngIf",o.syncStatus.syncError),c(),f("ngIf",o.syncStatus.syncInProgress),c(2),f("ngIf",!o.syncStatus.isOnline),c(),f("ngIf",o.syncStatus.syncInProgress),c(),f("ngIf",o.syncStatus.syncError))},dependencies:[B,V,nn,W,U,Z],styles:[".offline-indicator[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-light-shade);padding:8px 16px;transform:translateY(-100%);transition:transform .3s ease-in-out;z-index:1000;box-shadow:0 2px 4px #0000001a}.offline-indicator.show[_ngcontent-%COMP%]{transform:translateY(0)}.offline-indicator.offline[_ngcontent-%COMP%]{background:var(--ion-color-warning-tint);border-bottom-color:var(--ion-color-warning);color:var(--ion-color-warning-contrast)}.offline-indicator.syncing[_ngcontent-%COMP%]{background:var(--ion-color-primary-tint);border-bottom-color:var(--ion-color-primary);color:var(--ion-color-primary-contrast)}.offline-indicator.error[_ngcontent-%COMP%]{background:var(--ion-color-danger-tint);border-bottom-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast)}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;min-height:32px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;gap:12px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2em;flex-shrink:0}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;min-width:0}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{font-weight:500;font-size:.9em;line-height:1.2}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .last-sync[_ngcontent-%COMP%]{font-size:.75em;opacity:.8;line-height:1.2}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-shrink:0}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast);font-size:.75em;min-width:20px;height:20px;border-radius:10px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;height:32px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1em}.offline-indicator[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:2px}.high-contrast[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]{border-bottom-width:2px}.high-contrast[_ngcontent-%COMP%]   .offline-indicator.offline[_ngcontent-%COMP%]{background:#ff0;color:#000;border-bottom-color:#000}.high-contrast[_ngcontent-%COMP%]   .offline-indicator.error[_ngcontent-%COMP%]{background:red;color:#fff;border-bottom-color:#fff}.high-contrast[_ngcontent-%COMP%]   .offline-indicator.syncing[_ngcontent-%COMP%]{background:#00f;color:#fff;border-bottom-color:#fff}.high-contrast[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{--background: #000000;--color: #ffffff;border:1px solid #ffffff}.high-contrast[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-width: 1px;--border-style: solid;--border-color: currentColor}.reduced-motion[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]{transition:none}.reduced-motion[_ngcontent-%COMP%]   .offline-indicator.show[_ngcontent-%COMP%]{transform:translateY(0)}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]{padding:12px 16px}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]{min-height:40px}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{gap:16px}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4em}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{font-size:1em}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .last-sync[_ngcontent-%COMP%]{font-size:.85em}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]{gap:12px}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{min-width:24px;height:24px;font-size:.85em}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:40px;--padding-start: 12px;--padding-end: 12px}.large-buttons[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.3em}@media (max-width: 768px){.offline-indicator[_ngcontent-%COMP%]{padding:6px 12px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]{min-height:28px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{gap:8px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1em}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{font-size:.85em}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .last-sync[_ngcontent-%COMP%]{font-size:.7em}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]{gap:6px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{min-width:18px;height:18px;font-size:.7em}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:28px;--padding-start: 6px;--padding-end: 6px}.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1em}}@media (max-width: 480px){.offline-indicator[_ngcontent-%COMP%]   .indicator-content[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   .last-sync[_ngcontent-%COMP%]{display:none}}@media (prefers-color-scheme: dark){.offline-indicator[_ngcontent-%COMP%]{background:var(--ion-color-dark-shade);border-bottom-color:var(--ion-color-dark-tint);color:var(--ion-color-light)}.offline-indicator.offline[_ngcontent-%COMP%]{background:var(--ion-color-warning-shade)}.offline-indicator.syncing[_ngcontent-%COMP%]{background:var(--ion-color-primary-shade)}.offline-indicator.error[_ngcontent-%COMP%]{background:var(--ion-color-danger-shade)}}.focus-indicators[_ngcontent-%COMP%]   .offline-indicator[_ngcontent-%COMP%]   .status-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:focus{outline:2px solid var(--ion-color-primary);outline-offset:2px;border-radius:4px}@keyframes _ngcontent-%COMP%_sync-pulse{0%{opacity:1}50%{opacity:.6}to{opacity:1}}.offline-indicator.syncing[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_sync-pulse 1.5s ease-in-out infinite}.reduced-motion[_ngcontent-%COMP%]   .offline-indicator.syncing[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{animation:none}"]});let n=e;return n})();var gn=(()=>{let e=class e{constructor(t,r,o){this.i18nService=t,this.accessibilityService=r,this.offlineService=o}ngOnInit(){this.initializeApp()}initializeApp(){this.i18nService.setPageTitle("navigation.home"),this.accessibilityService.enableVoiceOverSupport(),this.addSkipLink()}addSkipLink(){let t=document.createElement("a");t.href="#main-content",t.className="skip-link",t.textContent=this.i18nService.translate("accessibility.skipToContent"),t.setAttribute("aria-label",this.i18nService.translate("accessibility.skipToContent")),document.body.insertBefore(t,document.body.firstChild)}};e.\u0275fac=function(r){return new(r||e)(g(P),g(h),g(M))},e.\u0275cmp=_({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","main-content"]],template:function(r,o){r&1&&(a(0,"ion-app"),u(1,"app-offline-indicator")(2,"ion-router-outlet",0),s())},dependencies:[Q,K,fn],encapsulation:2});let n=e;return n})();var dn=(()=>{let e=class e{constructor(){this.loadingSubject=new w(!1),this.loadingCount=0}get isLoading$(){return this.loadingSubject.asObservable()}get isLoading(){return this.loadingSubject.value}show(){this.loadingCount++,this.loadingCount===1&&this.loadingSubject.next(!0)}hide(){this.loadingCount=Math.max(0,this.loadingCount-1),this.loadingCount===0&&this.loadingSubject.next(!1)}forceHide(){this.loadingCount=0,this.loadingSubject.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var xn=(n,e)=>{let i=j(dn),t=n.headers.has("X-Skip-Loading");return t||i.show(),e(n).pipe(A(()=>{t||i.hide()}))},In=(n,e)=>e(n).pipe(z(1),E(i=>{let t="";if(i.error instanceof ErrorEvent)t=`\uD074\uB77C\uC774\uC5B8\uD2B8 \uC624\uB958: ${i.error.message}`;else switch(i.status){case 400:t="\uC798\uBABB\uB41C \uC694\uCCAD\uC785\uB2C8\uB2E4.";break;case 401:t="\uC778\uC99D\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.";break;case 403:t="\uC811\uADFC \uAD8C\uD55C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.";break;case 404:t="\uC694\uCCAD\uD55C \uB9AC\uC18C\uC2A4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.";break;case 500:t="\uC11C\uBC84 \uB0B4\uBD80 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";break;default:t=`\uC11C\uBC84 \uC624\uB958: ${i.status} ${i.message}`}return console.error("HTTP Error:",t,i),k(()=>new Error(t))}));$(gn,{providers:[{provide:N,useClass:J},q(),F(H([xn,In])),G(an,X(Y))]});
