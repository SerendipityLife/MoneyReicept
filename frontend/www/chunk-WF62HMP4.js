import{a as n}from"./chunk-JHTPU5XN.js";import{Ea as u,b as o,p as i,r as p,t as c}from"./chunk-TEVF6OOM.js";import{a as l}from"./chunk-JHI3MBHO.js";var h={receipts:[],recentReceipts:[],budgetSummary:null,travelPlans:[],selectedTravelPlan:null,isOnline:navigator.onLine},S=(()=>{let a=class a{constructor(){this.stateSubject=new o(h)}get state$(){return this.stateSubject.asObservable()}get currentState(){return this.stateSubject.value}setReceipts(t){this.updateState({receipts:t})}addReceipt(t){let e=[...this.currentState.receipts,t];this.updateState({receipts:e})}updateReceipt(t){let e=this.currentState.receipts.map(r=>r.id===t.id?t:r);this.updateState({receipts:e})}removeReceipt(t){let e=this.currentState.receipts.filter(r=>r.id!==t);this.updateState({receipts:e})}setRecentReceipts(t){this.updateState({recentReceipts:t})}setBudgetSummary(t){this.updateState({budgetSummary:t})}setTravelPlans(t){this.updateState({travelPlans:t})}addTravelPlan(t){let e=[...this.currentState.travelPlans,t];this.updateState({travelPlans:e})}updateTravelPlan(t){let e=this.currentState.travelPlans.map(r=>r.id===t.id?t:r);this.updateState({travelPlans:e})}setSelectedTravelPlan(t){this.updateState({selectedTravelPlan:t})}setOnlineStatus(t){this.updateState({isOnline:t})}updateState(t){let e=l(l({},this.currentState),t);this.stateSubject.next(e)}resetState(){this.stateSubject.next(h)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();var b=(()=>{let a=class a{constructor(t,e){this.http=t,this.appState=e,this.apiUrl=`${n.apiUrl}/budget`}getBudgetSummary(t){let e=t?`?month=${t.toISOString()}`:"";return this.http.get(`${this.apiUrl}/summary${e}`).pipe(i(r=>this.appState.setBudgetSummary(r)))}getCategoryExpenses(t){let e=t?`?month=${t.toISOString()}`:"";return this.http.get(`${this.apiUrl}/categories${e}`)}getDailyExpenses(t){let e=t?`?month=${t.toISOString()}`:"";return this.http.get(`${this.apiUrl}/daily${e}`)}getTravelPlans(){return this.http.get(`${n.apiUrl}/travel-plans`).pipe(i(t=>this.appState.setTravelPlans(t)))}createTravelPlan(t){return this.http.post(`${n.apiUrl}/travel-plans`,t).pipe(i(e=>this.appState.addTravelPlan(e)))}updateTravelPlan(t,e){return this.http.put(`${n.apiUrl}/travel-plans/${t}`,e).pipe(i(r=>this.appState.updateTravelPlan(r)))}deleteTravelPlan(t){return this.http.delete(`${n.apiUrl}/travel-plans/${t}`).pipe(i(()=>{let e=this.appState.currentState.travelPlans.filter(r=>r.id!==t);this.appState.setTravelPlans(e)}))}};a.\u0275fac=function(e){return new(e||a)(c(u),c(S))},a.\u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();export{b as a};
